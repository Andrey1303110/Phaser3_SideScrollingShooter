(()=>{"use strict";var e,t={314:(e,t,n)=>{n.d(t,{vc:()=>ze,vq:()=>$e,nD:()=>Je,nU:()=>Ze,V1:()=>Qe});var r=n(260),i="Levels",o="GameScene",s="Upgrade",a=["dragon","jet","strategic_jet","helicopter","boom"],c=["fire","flag","rocket","missile","missile_2","button_campaign","button_unlim","button_upgrade","map","battle","ruby","flag","frame","stamp","close","return","pause","pause_bg","restart","play","scale","reload","velocity","progressBar","progressBarFill"],l=["select","error","rocket_launch","fire_launch","missile_launch","missile_2_launch","explosion_small","wings","stamp","ready","died","win","upgrade","level_up","whoosh","click"];function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===u(i)?i:String(i)),r)}var i}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(s,Phaser.Scene);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(i){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,"Boot")}return t=s,(n=[{key:"init",value:function(){Ze()}},{key:"preload",value:function(){this.load.image("bg","./assets/sprites/bg.png"),this.load.image("pervious_logo","./assets/sprites/pervious_logo.png")}},{key:"create",value:function(){var e=this;this.createBG(),this.pervious_logo=this.add.sprite(ze.width/2,ze.height/2,"pervious_logo").setAlpha(0);var t=this.cameras.main.width/this.pervious_logo.width,n=this.cameras.main.height/this.pervious_logo.height,r=Math.max(t,n);this.pervious_logo.setScale(r).setScrollFactor(0),this.tweens.add({delay:250,targets:this.pervious_logo,alpha:1,ease:"Linear",duration:1750,yoyo:!0,onComplete:function(){e.scene.start("Preload")}})}},{key:"createBG",value:function(){this.sceneBG=this.add.sprite(ze.width/2,ze.height/2,"bg").setAlpha(.925).setOrigin(.5).setInteractive();var e=this.cameras.main.width/this.sceneBG.width,t=this.cameras.main.height/this.sceneBG.height,n=Math.max(e,t);this.sceneBG.setScale(n).setScrollFactor(0)}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===d(i)?i:String(i)),r)}var i}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(s,Phaser.GameObjects.Sprite);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(r);if(i){var n=b(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e.scene,e.x,e.y,e.texture,e.frame)).init(e),t}return t=s,(n=[{key:"init",value:function(e){this.scene.add.existing(this),this.scene.physics.add.existing(this),this.body.enable=!0,this.velocity=e.velocity,this.reward=e.reward,this.move(),this.scene.events.on("update",this.update,this)}},{key:"reset",value:function(e,t){this.x=e,this.y=t,this.setAlive(!0)}},{key:"update",value:function(){this.active&&this.isDead()&&this.setAlive(!1)}},{key:"setAlive",value:function(e){this.body.enable=e,this.setVisible(e),this.setActive(e),this.timer&&(this.timer.paused=!e),e||(this.emit("killed"),this.launch_sound&&(this.launch_sound.stop(),this.launch_sound.stop()&&this.launch_sound.destroy()))}},{key:"isDead",value:function(){return!1}},{key:"move",value:function(){this.body.setVelocityX(this.velocity)}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===w(i)?i:String(i)),r)}var i}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(a,e);var t,n,r,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(i);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.apply(this,arguments)}return t=a,r=[{key:"generate",value:function(e,t){return new a({scene:e,x:t.x+t.displayWidth/2*t.weapon.origin.x,y:t.y,texture:t.weapon.texture,velocity:t.weapon.velocity,scale:t.weapon.scale,reward:ze.reward[t.weapon.texture]})}}],(n=[{key:"createSound",value:function(e){this.launch_sound=e.scene.sound.add("".concat(e.weapon.texture,"_launch")),this.launch_sound.play({volume:.35})}},{key:"move",value:function(){var e=this;"missile"===this.texture.key||"missile_2"===this.texture.key?(this.body.setVelocityY(250),this.body.setVelocityX(this.velocity/10),setTimeout((function(){e.body.setVelocityY(e.velocity/50),e.body.setVelocityX(e.velocity)}),175)):this.body.setVelocityX(this.velocity)}},{key:"reset",value:function(){return!1}},{key:"isDead",value:function(){return this.x>ze.width+this.displayWidth||this.x<-this.displayWidth}}])&&O(t.prototype,n),r&&O(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(g);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===k(i)?i:String(i)),r)}var i}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(s,Phaser.Physics.Arcade.Group);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(r);if(i){var n=B(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,e.physics.world,e)}return t=s,(n=[{key:"createFire",value:function(e){if(e.active){var t=x.generate(this.scene,e);t.setScale(e.weapon.scale),this.add(t),t.move(),this.createdCount++,t.createSound(e)}}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==R(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===R(i)?i:String(i)),r)}var i}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},A.apply(this,arguments)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(r);if(i){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,{scene:e.scene,x:Je.left,y:ze.height/2,texture:"dragon",frame:"dragon1",velocity:ze.Player.velocity,weapon:{texture:"fire",delay:ze.Weapons.fire.reload,velocity:ze.Weapons.fire.velocity,scale:ze.Weapons.fire.scale,origin:{x:1,y:.5}}})).x+=t.width;var n=t.scene.anims.generateFrameNames("dragon",{prefix:"dragon",start:1,end:6});return t.scene.anims.create({key:"fly",frames:n,frameRate:8,repeat:-1}),t.play("fly"),t}return t=a,(n=[{key:"init",value:function(e){A(D(a.prototype),"init",this).call(this,e),this.scene.add.existing(this),this.scene.physics.add.existing(this),this.body.enable=!0,this.fires=new E(this.scene),this.weapon=e.weapon,this.scene.events.on("update",this.updateFrame,this),this._lastFrame="dragon1",this._tweenFly=null}},{key:"updateFrame",value:function(){var e=this;if(this.active){if(this.frame.name!==this._lastFrame){var t=this.y;"dragon6"===this.frame.name?this.scene.constructor.name!==o&&(this._tweenFly=this.scene.tweens.add({targets:this,y:t+this.displayHeight/3,ease:"Linear",duration:350,onComplete:function(){e._tweenFly=null}})):"dragon3"===this.frame.name&&(this.scene.constructor.name!==o&&(this._tweenFly=this.scene.tweens.add({targets:this,y:t-this.displayHeight/3,ease:"Linear",duration:350,onComplete:function(){e._tweenFly=null}})),this.scene.sounds.wings.play({volume:.1}))}this._lastFrame=this.frame.name}}},{key:"shooting",value:function(){var e=this;!this.scene.cursors.space.isDown&&!this.scene.fireButton.active||this.fires_activate||(this.scene.fireButton.setAlpha(.95),this.fires.createFire(this),this.fires_activate=!0,this.fireTimer=this.scene.time.addEvent({delay:this.weapon.delay,callback:function(){e.fires_activate=!1,e.scene.fireButton.setAlpha(.65)},callbackScope:this}))}},{key:"move",value:function(){this.body.setVelocity(0),this.y<Je.top+this.displayHeight/1.5?this.y=Je.top+this.displayHeight/1.5:this.y>Je.bottom-this.displayHeight/1.5&&(this.y=Je.bottom-this.displayHeight/1.5),this.x<Je.left+this.displayWidth/1.5?this.x=Je.left+this.displayWidth/1.5:this.x>Je.right-this.displayWidth/1.5&&(this.x=Je.right-this.displayWidth/1.5),this.handling()}},{key:"handling",value:function(){var e,t=100,n=!1;for(var r in this.scene.cursorKeys)this.scene.cursorKeys[r].isDown&&(n=!0,(t=Math.floor(100*this.scene.joyStick.force)/100)>100&&(t=100));if(e=n?this.scene.cursorKeys:this.scene.cursors){if(e.left.isDown){if(this.x<this.x-this.velocity/ze.fps)return;this.body.setVelocityX(-this.velocity*(t/100))}else if(e.right.isDown){if(this.x>this.x+this.velocity/ze.fps)return;this.body.setVelocityX(this.velocity*(t/100))}if(e.up.isDown||e.down.isDown)if(this._tweenFly&&(this._tweenFly.paused=!0),e.up.isDown){if(this.y<this.y-this.velocity/ze.fps)return;this.body.setVelocityY(-this.velocity*(t/100))}else if(e.down.isDown){if(this.y>this.y+this.velocity/ze.fps)return;this.body.setVelocityY(this.velocity*(t/100))}}}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==I(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===I(i)?i:String(i)),r)}var i}function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},G.apply(this,arguments)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(a,e);var t,n,r,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(i);if(o){var n=M(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.apply(this,arguments)}return t=a,r=[{key:"generateAttr",value:function(e){var t=Je.right+.25*ze.width,n=Phaser.Math.Between(Je.top+e.maxEnemyFrameHeight/2,Je.bottom-e.maxEnemyFrameHeight/2),r=0;e.info.level>4&&(r=1,e.info.level>8&&(r=2));var i=Object.keys(ze.Enemies)[Phaser.Math.Between(0,r)];return{x:t,y:n,enemy_frame:"enemy".concat(Phaser.Math.Between(1,4)),enemy_type:i}}},{key:"generate",value:function(e,t){var n=a.generateAttr(e);return new a({scene:e,fires:t,x:n.x,y:n.y,enemy_type:n.enemy_type,texture:n.enemy_type,frame:n.enemy_frame,velocity:-1*ze.Enemies[n.enemy_type].velocity})}}],(n=[{key:"init",value:function(e){G(M(a.prototype),"init",this).call(this,e),this.enemy_type=e.enemy_type,this.fires_activate=!0,this.setWeapon(),this.reward=ze.reward[e.texture],this.fires=e.fires,this.timer=this.scene.time.addEvent({delay:ze.Weapons[this.weapon.texture].reload*(.01*Phaser.Math.Between(75,125)),loop:!0,callback:this.shooting,callbackScope:this})}},{key:"setWeapon",value:function(){this.weapon={texture:ze.Enemies[this.enemy_type].weapon,delay:ze.Weapons[ze.Enemies[this.enemy_type].weapon].reload,velocity:ze.Weapons[ze.Enemies[this.enemy_type].weapon].velocity,scale:ze.Weapons[ze.Enemies[this.enemy_type].weapon].scale,origin:{x:-1,y:.5}}}},{key:"stopTimer",value:function(){this.fires_activate=!1}},{key:"shooting",value:function(){this.fires_activate&&this.fires.createFire(this)}},{key:"reset",value:function(){var e=a.generateAttr(this.scene);G(M(a.prototype),"reset",this).call(this,e.x,e.y),this.setWeapon(),this.setFrame(e.frame)}},{key:"isDead",value:function(){return this.x<-this.displayWidth}}])&&F(t.prototype,n),r&&F(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(g);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==V(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===V(i)?i:String(i)),r)}var i}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(s,Phaser.Physics.Arcade.Group);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(i){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e.physics.world,e)).scene=e,t.fires=new E(t.scene),t.countMax=t.scene.info.enemies,t.killed=0,t.createdCount=0,t.timer=t.scene.time.addEvent({delay:t.scene.info.enemiesDelay,loop:!0,callback:t.tick,callbackScope:U(t)}),t}return t=s,(n=[{key:"tick",value:function(){this.scene.time.addEvent({delay:this.scene.info.enemiesDelay*(.01*Phaser.Math.Between(50,150)),callback:this.createEnemy,callbackScope:this})}},{key:"stopTimer",value:function(){this.timer.remove()}},{key:"createEnemy",value:function(){if(this.countMax>this.createdCount){var e=H.generate(this.scene,this.fires);e.on("killed",this.onEnemyKilled,this),this.add(e),e.move(),this.createdCount++}else this.timer.remove()}},{key:"onEnemyKilled",value:function(){this.killed++,this.killed>=this.countMax&&this.scene.events.emit("enemies-killed")}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Y(i)?i:String(i)),r)}var i}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}var $="explosion",ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(a,Phaser.GameObjects.Sprite);var t,n,r,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Q(i);if(o){var n=Q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Z(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e.scene,e.x,e.y)).scene.add.existing(Z(t)),t.scene.physics.add.existing(Z(t)),t.body.enable=!0,t.createAnimation(),t.play($),t.once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){t.destroy()})),t}return t=a,r=[{key:"generate",value:function(e,t,n){return new a({scene:e,x:t,y:n})}}],(n=[{key:"createAnimation",value:function(){if(!this.scene.anims.anims.entries[$]){var e=this.scene.anims.generateFrameNames("boom",{prefix:"boom",start:1,end:7});this.scene.anims.create({key:$,frames:e,frameRate:8,repeat:0})}}}])&&z(t.prototype,n),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}();function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==te(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===te(i)?i:String(i)),r)}var i}function re(e,t){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},re(e,t)}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(a,Phaser.Scene);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ie(r);if(i){var n=ie(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,o)}return t=a,(n=[{key:"init",value:function(e){"0"!==localStorage.getItem("firstTimePlay")&&localStorage.setItem("firstTimePlay","0"),this.info=e,this.currentLevelScene=this.info.level,this.currentScore=0,this.black_bg=null}},{key:"create",value:function(e){var t;this.createBG(e),this.getMaxEnemyHeightFrame(),this.cursors=this.input.keyboard.createCursorKeys(),this.createPlayer(),this.createEnemies(),this.createCompleteEvents(),this.addOverlap(),this.createScoreText(),this.createSounds(),this.addPauseButton(),this.addJoystick(),this.addFireButton(),null!==(t=this.info)&&void 0!==t&&t.unlim||this.addProgressBar()}},{key:"addJoystick",value:function(){var e=document.body.clientWidth>1280?0:1;this.joyStick=this.plugins.get("rexvirtualjoystickplugin").add(this,{x:Je.left+ze.joystick.radius+ze.joystick.gap,y:Je.bottom-ze.joystick.radius-ze.joystick.gap,radius:ze.joystick.radius,base:this.add.circle(0,0,ze.joystick.radius).setStrokeStyle(3.5,1729964).setAlpha(.75*e),thumb:this.add.circle(0,0,ze.joystick.radius/2,13421772).setAlpha(.5*e),dir:"8dir"})}},{key:"dumpJoyStickState",value:function(){this.joyStick&&(this.cursorKeys=this.joyStick.createCursorKeys())}},{key:"addFireButton",value:function(){var e=this,t=document.body.clientWidth>1280?0:1;this.fireButton=this.add.sprite(Je.right-ze.joystick.radius-ze.joystick.gap,this.joyStick.y,"fire").setAlpha(.65*t).setInteractive().setActive(!1).on("pointerup",(function(){e.fireButton.active=!1}),this).on("pointerdown",(function(){e.fireButton.active=!0,e.player.shooting()}),this)}},{key:"update",value:function(){this.sceneBG.tilePositionX+=this.sceneBG.width/1e4*this.speed,this.dumpJoyStickState(),this.player.move(),this.player.shooting()}},{key:"createBG",value:function(e){var t=null!=e&&e.unlim?"bg".concat(Phaser.Math.Between(1,ze.Levels.length)):"bg".concat(e.level),n=this.textures.list[t].source[0].height,r=ze.height/n;this.speed=.048*ze.Levels[this.currentLevelScene-1].velocity,1!==r&&(this.speed/=r),this.sceneBG=this.add.tileSprite(0,0,ze.width,ze.height,t).setOrigin(0).setScale(r).setAlpha(.65)}},{key:"createScoreText",value:function(){var e;this.hiScoreText&&this.hiScoreText.destroy(),this.scoreText=this.add.text(Je.right-.01*ze.width,Je.top+.01*ze.width,this.currentScore,{font:"".concat(.03*ze.width,"px DishOut"),fill:"#EA0000"}).setOrigin(1,0).setAlpha(.75),null!==(e=this.info)&&void 0!==e&&e.unlim&&(this.hiScoreText=this.add.text(ze.width/2,Je.top+.01*ze.width,"High score: "+localStorage.getItem("unlimHiScores"),{font:"".concat(.03*ze.width,"px DishOut"),fill:"#EA0000"}).setOrigin(.5,0).setAlpha(.75))}},{key:"createPlayer",value:function(){this.player=new W({scene:this})}},{key:"createEnemies",value:function(){this.enemies=new X(this)}},{key:"createSounds",value:function(){this.sounds||(this.sounds={rocket_launch:this.sound.add("rocket_launch"),fire_launch:this.sound.add("fire_launch"),missile_launch:this.sound.add("missile_launch"),explosion_small:this.sound.add("explosion_small"),wings:this.sound.add("wings"),died:this.sound.add("died"),win:this.sound.add("win"),level_up:this.sound.add("level_up")})}},{key:"addOverlap",value:function(){this.physics.add.overlap(this.player.fires,this.enemies,this.onOverlap,void 0,this),this.physics.add.overlap(this.enemies.fires,this.player,this.onOverlap,void 0,this),this.physics.add.overlap(this.player.fires,this.enemies.fires,this.onOverlap,void 0,this),this.physics.add.overlap(this.player,this.enemies,this.onOverlap,void 0,this)}},{key:"onOverlap",value:function(e,t){if(!(t.x>ze.width+t.displayWidth/2)){if(e!==this.player&&t!==this.player){var n,r;if(null===(n=this.info)||void 0===n||!n.unlim){var i=t.texture.key;"strategic_jet"===t.texture.key?i="jet":"missile_2"===t.texture.key&&(i="missile");var o=Number(localStorage.getItem("losses_".concat(i)));localStorage.setItem("losses_".concat(i),++o)}var s=Number((t.reward*Math.pow(ze.level.scoreCof,this.currentLevelScene-1)).toFixed(0));if(this.currentScore+=s,null===(r=this.info)||void 0===r||!r.unlim){var a=Number(ze.totalScore);localStorage.setItem("totalScore",a+s),ze.totalScore=a+s}this.scoreText.text=this.currentScore,this.updateProgressBar()}ee.generate(this,t.x,t.y),e.setAlive(!1),t.setAlive(!1),this.sounds.explosion_small.play()}}},{key:"createCompleteEvents",value:function(){this.player.emit("killed"),this.player.once("killed",this.onComplete,this),this.events.once("enemies-killed",this.onComplete,this)}},{key:"onComplete",value:function(){var e=this;if(!this.black_bg){this.black_bg=this.add.rectangle(ze.width/2,ze.height/2,ze.width,ze.height,"0x000000",0).setInteractive().setDepth(9999999);var t=this.add.text(this.black_bg.x,this.black_bg.y,"",{font:"".concat(.03*ze.width,"px DishOut"),fill:"#EA0000"}).setOrigin(.5).setAlpha(0).setDepth(this.black_bg.depth);if(this.game.sound.stopAll(),this.player.active){if(this.sounds.win.play(),t.text="GLORY TO UKRAINE!",this.info.hiScore<this.currentScore){var n=localStorage.getItem("hiScores").split(",");n[this.currentLevelScene-1]=this.currentScore,localStorage.setItem("hiScores",n.join())}ze.currentLevelScene<=this.currentLevelScene&&(ze.currentLevelScene++,localStorage.setItem("currentLevelScene",ze.currentLevelScene))}else t.text="HEROES DON'T DIE!",this.sounds.died.play(),this.info.unlim&&localStorage.getItem("unlimHiScores")<this.currentScore&&localStorage.setItem("unlimHiScores",this.currentScore);this.tweens.add({targets:[this.black_bg,t],fillAlpha:1,alpha:1,scale:2*t.scale,ease:"Linear",duration:1e3*this.sounds.died.duration*.75,onComplete:function(){e.info.unlim?e.scene.start("Levels"):e.scene.start("Map"),e.scene.stop()}}),this.enemies.stopTimer(),this.enemies.children.entries.forEach((function(e){e.stopTimer()}))}}},{key:"addPauseButton",value:function(){var e=this;this.add.sprite(Je.left+.015*ze.width,Je.top+.015*ze.width,"pause").setAlpha(.65).setInteractive().on("pointerdown",(function(){e.scene.launch("Pause"),e.scene.pause()}),this)}},{key:"addProgressBar",value:function(){this.progressBar=this.add.sprite(ze.width/2,Je.top+.0225*ze.width,"progressBar").setAlpha(.95),this.progressBar.fillProgress=this.add.sprite(this.progressBar.x+.1*this.progressBar.displayWidth,this.progressBar.y+.04*this.progressBar.displayHeight,"progressBarFill").setAlpha(.95),this.progressBar.levelText=this.add.text(this.progressBar.x-.38*this.progressBar.displayWidth,this.progressBar.y-.035*this.progressBar.displayHeight,ze.currentLevelPlayer,{font:"".concat(.545*this.progressBar.displayHeight,"px DishOut"),fill:"#FFFFFF"}).setOrigin(.5).setAlpha(.75),this.updateProgressBar()}},{key:"updateProgressBar",value:function(){var e;if(null===(e=this.info)||void 0===e||!e.unlim){var t={start:this.getRequiredScoreOnLevel(ze.currentLevelPlayer-1),end:this.getRequiredScoreOnLevel(ze.currentLevelPlayer),diff:this.getRequiredScoreOnLevel(ze.currentLevelPlayer)-this.getRequiredScoreOnLevel(ze.currentLevelPlayer-1)},n=(ze.totalScore-t.start)/t.diff;ze.currentLevelPlayer<2&&(n=ze.totalScore/t.diff),n>=1&&(this.increaseLevel(),t={start:this.getRequiredScoreOnLevel(ze.currentLevelPlayer-1),end:this.getRequiredScoreOnLevel(ze.currentLevelPlayer),diff:this.getRequiredScoreOnLevel(ze.currentLevelPlayer)-this.getRequiredScoreOnLevel(ze.currentLevelPlayer-1)},n=1- -1*(ze.totalScore-t.end)/t.diff),this.progressBar.fillProgress.frame.cutWidth=this.progressBar.fillProgress.displayWidth*n,this.progressBar.fillProgress.frame.updateUVs(),this.progressBar.text=ze.currentLevelPlayer}}},{key:"increaseLevel",value:function(){var e=this;this.sounds.level_up.play({volume:.5}),ze.currentLevelPlayer++,localStorage.setItem("currentLevelPlayer",ze.currentLevelPlayer);var t=this.add.text(ze.width/2,ze.height/2,ze.currentLevelPlayer,{font:"".concat(.25*ze.width,"px DishOut"),fill:"#FFFFFF"}).setOrigin(.5).setAlpha(0);this.tweens.add({targets:t,alpha:1,x:this.progressBar.levelText.x,y:this.progressBar.levelText.y,scale:this.progressBar.levelText.displayWidth/t.displayWidth,ease:"Linear",duration:500,onComplete:function(){t.destroy(),e.progressBar.levelText.text=ze.currentLevelPlayer}}),this.increaseMoney()}},{key:"getRequiredScoreOnLevel",value:function(e){for(var t=0,n=0;n<e;n++)t+=Number((ze.level.score*Math.pow(ze.level.levelCof,n)).toFixed(0));return t}},{key:"increaseMoney",value:function(){++ze.money,localStorage.setItem("money",ze.money)}},{key:"getMaxEnemyHeightFrame",value:function(){var e=0,t=this.textures.list.helicopter.frames;Object.keys(t).forEach((function(n){t[n].cutHeight>e&&(e=t[n].height)})),this.maxEnemyFrameHeight=e}}])&&ne(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==se(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===se(i)?i:String(i)),r)}var i}function ce(e,t){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ce(e,t)}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},le(e)}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(l,Phaser.Scene);var t,n,r,a,c=(r=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=le(r);if(a){var n=le(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),c.call(this,i)}return t=l,(n=[{key:"init",value:function(){this._buttons={},this._buttons_num=0}},{key:"create",value:function(){this._createBG(),this._createSounds(),this._createButton("campaign",.275),this._createButton("unlim",.5),this._createButton("upgrade",.725)}},{key:"_createBG",value:function(){var e=this.add.sprite(ze.width/2,ze.height/2,"bg").setAlpha(.925).setOrigin(.5).setInteractive(),t=this.cameras.main.width/e.width,n=this.cameras.main.height/e.height,r=Math.max(t,n);e.setScale(r).setScrollFactor(0)}},{key:"_addButtonEventListeners",value:function(e){var t=this;e.on("pointerover",(function(){return e.setAlpha(1)})),e.on("pointerout",(function(){return e.setAlpha(.75)})),e.on("pointerdown",(function(){return t._gameSelect(e)}))}},{key:"_createButton",value:function(e,t){this._buttons_num++,this._createButtonSprite(e,t),this._createButtonText(this._buttons[e],e),this._createButtonTweens(this._buttons[e]),this._addButtonEventListeners(this._buttons[e])}},{key:"_createButtonText",value:function(e,t){var n=t.toUpperCase(),r={font:"".concat(.03*ze.width,"px DishOut"),fill:"#f0f0f0"};e.buttonText=this.add.text(e.x,e.y,n,r).setScale(3).setOrigin(.5).setAlpha(0)}},{key:"_createButtonSprite",value:function(e,t){this._buttons[e]=this.add.sprite(ze.width/2,ze.height*t,"button_"+e).setScale(5).setAlpha(0).setOrigin(.5).setInteractive(),this._buttons[e].name=e}},{key:"_createButtonTweens",value:function(e){var t=this;this.tweens.add({targets:e,delay:375*this._buttons_num,alpha:.675,scale:.65,ease:"Linear",duration:225,onStart:function(){return t.sounds.whoosh.play({volume:.33})}}),this.tweens.add({targets:e.buttonText,delay:375*this._buttons_num,alpha:.9,scale:1,ease:"Linear",duration:225})}},{key:"_gameSelect",value:function(e){var t=this;this.sounds.click.play({volume:.33}),this.tweens.add({targets:[e,e.buttonText],alpha:0,scale:7,ease:"Linear",duration:750,onComplete:function(){return t._startNewScene(e.name)}})}},{key:"_startNewScene",value:function(e){switch(e){case"campaign":this.scene.start("Map");break;case"unlim":this.scene.start(o,ze.unlim);break;case"upgrade":this.scene.start(s)}}},{key:"_createSounds",value:function(){this.sounds||(this.sounds={click:this.sound.add("click"),whoosh:this.sound.add("whoosh")})}}])&&ae(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}();function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==he(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===he(i)?i:String(i)),r)}var i}function ye(e,t){return ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ye(e,t)}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}var de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ye(e,t)}(l,Phaser.Scene);var t,n,r,a,c=(r=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pe(r);if(a){var n=pe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),c.call(this,"Map")}return t=l,(n=[{key:"init",value:function(){this.mapDots=[]}},{key:"create",value:function(){this.createSounds(),this.createBG(),this.createMap(),this.createMissions(),this.createLosses(),this.addReturnButton(),this.addAvailableMoney()}},{key:"createBG",value:function(){this.sceneBG=this.add.sprite(ze.width/2,ze.height/2,"bg").setAlpha(.925).setOrigin(.5).setInteractive();var e=this.cameras.main.width/this.sceneBG.width,t=this.cameras.main.height/this.sceneBG.height,n=Math.max(e,t);this.sceneBG.setScale(n).setScrollFactor(0)}},{key:"createMap",value:function(){this.map=this.add.sprite(ze.width/2,ze.height/2,"map").setAlpha(.65).setOrigin(.5).setScale(1.25)}},{key:"createMissions",value:function(){var e=this;ze.Levels.forEach((function(t){e.createDot(t)}))}},{key:"createDot",value:function(e){var t=this,n=(ze.width-this.map.displayWidth)/2+e.x/1e3*this.map.displayWidth,r=(ze.height-this.map.displayHeight)/2+e.y/1e3*this.map.displayWidth,i=this.add.sprite(n,r,"battle").setOrigin(.5).setInteractive().on("pointerdown",this.selectLevel);i.info=e,e.level>ze.currentLevelScene?(i.setAlpha(.6).setScale(2/3).on("pointerdown",(function(){t.sounds.error.play({volume:.33})})),i.active=!1):(i.setAlpha(1).on("pointerdown",(function(){t.sounds.select.play({volume:.33})})),i.active=!0,ze.currentLevelScene>e.level?i.setTexture("flag").setOrigin(0,1):this.addDotAnim(i)),this.mapDots.push(i)}},{key:"addDotAnim",value:function(e){this.tweens.add({targets:e,scale:1.5*e.scale,duration:425,yoyo:!0,repeat:-1})}},{key:"selectLevel",value:function(){this.active&&this.scene.createLevelCard(this.info)}},{key:"createLevelCard",value:function(e){var t=this,n=this.add.rectangle(ze.width/2,ze.height/2,ze.width,ze.height,"0x000000",0).setInteractive(),r=localStorage.getItem("hiScores").split(",")[e.level-1];e.hiScore=r;var i=this.add.sprite(ze.width/2,ze.height/2,"frame");i.displayHeight=.795*ze.height;var o=[];o.push(this.add.text(i.x,i.y-i.displayHeight/2+.086*i.displayHeight,"MISSION",{font:"".concat(.13*i.displayWidth,"px DishOut"),fill:"#0a0a0a"}).setOrigin(.5).setAlpha(.55)),o.push(this.add.text(i.x,i.y-i.displayHeight/2+.25*i.displayHeight,"Level ".concat(e.level),{font:"".concat(.0925*i.displayWidth,"px DishOut"),fill:"#0a0a0a"}).setOrigin(.5).setAlpha(.8)),o.push(this.add.text(i.x,i.y-i.displayHeight/2+.37*i.displayHeight,"City",{font:"".concat(.055*i.displayWidth,"px DishOut"),fill:"#0a0a0a"}).setOrigin(.5).setAlpha(.8)),o.push(this.add.text(i.x,i.y-i.displayHeight/2+.44*i.displayHeight,e.name,{font:"".concat(.06175*i.displayWidth,"px DishOut"),fill:"#0a0a0a"}).setOrigin(.5).setAlpha(.8)),r>0&&o.push(this.add.text(i.x,i.y-i.displayHeight/2+.58*i.displayHeight,"Hi score: ".concat(r),{font:"".concat(.049*i.displayWidth,"px DishOut"),fill:"#E2B80D"}).setOrigin(.5).setAlpha(.8)),o.push(this.add.text(i.x,i.y-i.displayHeight/2+.71*i.displayHeight,"Enemies - ".concat(e.enemies),{font:"".concat(.051*i.displayWidth,"px DishOut"),fill:"#EA0000"}).setOrigin(.5).setAlpha(.8)),this.sounds.stamp.play();var s=this.add.sprite(i.x,i.y,"stamp").setAlpha(0).setAngle(31).setScale(2.5),a=i.x+i.displayWidth/2-i.displayWidth*Phaser.Math.Between(25,35)/100,c=i.y+i.displayWidth/2-i.displayHeight*Phaser.Math.Between(26,30)/100;this.add.timeline([{tween:{targets:s,scale:.26,x:a,y:c,alpha:.85,ease:"Power3",duration:365}},{at:365,tween:{targets:s,scale:.305,alpha:.55,ease:"Power2",duration:273.75}},{at:638.75,run:function(){var r=t.add.text(i.x,i.y+i.displayHeight/2-.09*i.displayHeight,"START",{font:"".concat(.105*i.displayWidth,"px DishOut"),fill:"#51E04A"}).setOrigin(.5).setAlpha(.7).setInteractive().on("pointerdown",(function(){t.gameStart(e)})).on("pointerover",(function(){r.setAlpha(.9)})).on("pointerout",(function(){r.setAlpha(.7)}));o.push(r);var a=t.add.sprite(i.x+i.displayWidth/2,i.y-i.displayHeight/2,"close").setOrigin(1.3,-.35).setAlpha(.7).setInteractive().on("pointerdown",(function(){t.cardClose({bg_rect:n,frame:i,texts:o,stamp:s,close_button:a})})).on("pointerover",(function(){a.setAlpha(.9)})).on("pointerout",(function(){a.setAlpha(.7)}))}}]).play()}},{key:"cardClose",value:function(e){this.sounds.click.play({volume:.33}),e.bg_rect.destroy(),e.frame.destroy(),e.stamp.destroy(),e.close_button.destroy(),e.texts.forEach((function(e){e.destroy()}))}},{key:"gameStart",value:function(e){var t=this;this.sounds.ready.play();var n=this.add.rectangle(ze.width/2,ze.height/2,ze.width,ze.height,"0x000000",0).setInteractive();this.tweens.add({targets:n,fillAlpha:1,ease:"Linear",duration:1e3*this.sounds.ready.duration*.7,onComplete:function(){return t.scene.start(o,e)}})}},{key:"createLosses",value:function(){var e=this;this.losses_text&&this.losses_text.forEach((function(e){e.destroy()}));var t={x:Je.left+.033*ze.width,y:.635*ze.height};this.losses_text=[],this.losses_text.push(this.add.text(t.x,t.y,"Total russian losses:",{font:"".concat(.025*ze.width,"px DishOut"),fill:"#EA0000"}).setOrigin(0,.5).setAlpha(.75)),Object.keys(ze.Losses).forEach((function(n){t.y+=.0285*ze.width,e.losses_text.push(e.add.text(t.x,t.y,"".concat(n,"s: ").concat(localStorage.getItem("losses_".concat(n))),{font:"".concat(.0215*ze.width,"px DishOut"),fill:"#000000"}).setOrigin(0,.5).setAlpha(.75))}))}},{key:"addReturnButton",value:function(){var e=this;this.add.sprite(Je.left+.015*ze.width,Je.top+.015*ze.width,"return").setAlpha(.65).setInteractive().on("pointerdown",(function(){return e.scene.start(i)}),this)}},{key:"addAvailableMoney",value:function(){var e=this,t={font:"".concat(.031*ze.width,"px DishOut"),fill:"#FFFFFF"};this.moneyIcon=this.add.sprite(Je.right-.075*ze.height,Je.top+.075*ze.height,"ruby").setScale(.25).setInteractive().on("pointerdown",(function(){return e.scene.start(s)})),this.moneyText=this.add.text(this.moneyIcon.x-this.moneyIcon.displayWidth,this.moneyIcon.y,ze.money,t).setOrigin(.5).setAlpha(1)}},{key:"createSounds",value:function(){this.sounds||(this.sounds={click:this.sound.add("click"),select:this.sound.add("select"),error:this.sound.add("error"),stamp:this.sound.add("stamp"),ready:this.sound.add("ready")})}}])&&fe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}();function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==ve(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ve(i)?i:String(i)),r)}var i}function be(e,t){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},be(e,t)}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}var we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}(s,Phaser.Scene);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ge(r);if(i){var n=ge(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,"Pause")}return t=s,(n=[{key:"init",value:function(){this.game.sound.stopAll()}},{key:"create",value:function(){this.createBG(),this.createButtons(),this.toggleMenu()}},{key:"createBG",value:function(){this.black_bg=this.add.rectangle(ze.width/2,ze.height/2,ze.width,ze.height,"0x000000",0),this.sceneBG=this.add.sprite(ze.width/2,-1*ze.height,"pause_bg").setOrigin(.5),this.tweens.add({targets:this.sceneBG,y:ze.height/2,ease:"Linear",duration:750})}},{key:"createButtons",value:function(){var e=this;this.play_button=this.add.sprite(this.sceneBG.x,this.sceneBG.y,"play").setScale(.8).setAlpha(.85).setOrigin(.5).setInteractive().on("pointerdown",(function(){e.toggleMenu("resume")}),this).on("pointerover",(function(){e.play_button.setAlpha(1)})).on("pointerout",(function(){e.play_button.setAlpha(.85)})),this.restart_button=this.add.sprite(this.sceneBG.x+.25*this.sceneBG.displayWidth,this.sceneBG.y,"restart").setScale(1.25).setAlpha(.65).setOrigin(.5).setInteractive().on("pointerdown",(function(){e.toggleMenu("restart")}),this).on("pointerover",(function(){e.restart_button.setAlpha(1)})).on("pointerout",(function(){e.restart_button.setAlpha(.65)})),this.return_button=this.add.sprite(this.sceneBG.x-.25*this.sceneBG.displayWidth,this.sceneBG.y,"return").setScale(1.25).setAlpha(.65).setOrigin(.5).setInteractive().on("pointerdown",(function(){e.toggleMenu("return")}),this).on("pointerover",(function(){e.return_button.setAlpha(1)})).on("pointerout",(function(){e.return_button.setAlpha(.65)}))}},{key:"toggleMenu",value:function(e){var t=this,n=this.sceneBG.y<0?Je.top+this.sceneBG.displayHeight/2:-1*ze.height;this.tweens.add({targets:this.sceneBG,y:n,ease:"Linear",duration:750,onComplete:function(){switch(e){case"resume":t.scene.resume("Game");break;case"restart":t.scene.start("Game");break;case"return":t.scene.stop("Game"),t.scene.launch("Map")}}}),this.tweens.add({targets:[this.play_button,this.restart_button,this.return_button],y:n+.06085*this.sceneBG.displayHeight,ease:"Linear",duration:750})}}])&&me(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Oe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Oe(i)?i:String(i)),r)}var i}function _e(e,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_e(e,t)}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xe(e)}var ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(a,Phaser.Scene);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xe(r);if(i){var n=xe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,s)}return t=a,(n=[{key:"init",value:function(){this.buttons={}}},{key:"create",value:function(){this.createBG(),this.createPlayer(),this.addReturnButton(),this.createSounds(),this.addAvailableMoney()}},{key:"createBG",value:function(){this.sceneBG=this.add.sprite(ze.width/2,ze.height/2,"bg").setAlpha(.925).setOrigin(.5);var e=this.cameras.main.width/this.sceneBG.width,t=this.cameras.main.height/this.sceneBG.height,n=Math.max(e,t);this.sceneBG.setScale(n).setScrollFactor(0)}},{key:"addAvailableMoney",value:function(){var e={font:"".concat(.031*ze.width,"px DishOut"),fill:"#FFFFFF"};this.moneyIcon=this.add.sprite(Je.right-.075*ze.height,Je.top+.075*ze.height,"ruby").setScale(.25),this.moneyText=this.add.text(this.moneyIcon.x-this.moneyIcon.displayWidth,this.moneyIcon.y,ze.money,e).setOrigin(.5).setAlpha(1)}},{key:"createPlayer",value:function(){this.player=new W({scene:this}),this.tweens.add({targets:this.player,x:.125*ze.width,ease:"Linear",duration:1250,onComplete:this.createStats,callbackScope:this})}},{key:"createStats",value:function(){var e=this;this.statsText={},this.statsIcon={},this.statsLevel={};for(var t={font:"".concat(.031*ze.width,"px DishOut"),fill:"#000000"},n=this.add.text(ze.width/2,Je.bottom-.075*ze.height,"Every level increse your ability on +5%",t).setOrigin(.5).setAlpha(0),r=Object.keys(ze.Weapons.fire),i=ze.height/2.5,o=function(o){var s=r[o],a=1;"scale"===s&&(a=100);var c=(Math.round(ze.Weapons.fire[s]*a)/a*a).toFixed(0),l=.57*ze.width,u=ze.height/2-i/2+i/r.length*o,h=localStorage.getItem("playerWeapon_".concat(s)),f="".concat(s.toUpperCase()," (").concat(ze.weapons_units[s],"): ").concat(c),y="Lvl. "+h;e.statsText[s]=e.add.text(l,u,f,t).setOrigin(1,0).setAlpha(0),e.statsIcon[s]=e.add.sprite(l+.06*ze.width,u,s).setOrigin(.5,.15).setAlpha(0).setDisplaySize(.045*ze.width,.045*ze.width),e.statsLevel[s]=e.add.text(l+.12*ze.width,u,y,t).setOrigin(0,0).setAlpha(0),e.tweens.add({targets:[e.statsText[s],e.statsIcon[s],e.statsLevel[s]],delay:275*o,ease:"Linear",alpha:.75,duration:450,onComplete:function(){o>=r.length-1&&e.tweens.add({targets:n,delay:275,ease:"Linear",alpha:.75,duration:450})},callbackScope:e}),e.createUpgredeButton({x:l,y:u,key:s,level:h})},s=0;s<r.length;s++)o(s)}},{key:"checkAvailable",value:function(e){this.checkPrice(e);var t=.9;ze.money<e.cost&&(e.active=!1,t=.5),e.setAlpha(t),e.textCost.setAlpha(t),e.crystal.setAlpha(t)}},{key:"checkPrice",value:function(e){e.cost=Math.floor(e.level/10)+1,e.textCost.text=e.cost}},{key:"createUpgredeButton",value:function(e){this.buttons[e.key]=this.add.sprite(e.x+.3*ze.width,e.y,"button_campaign").setOrigin(.5,.125).setScale(.33).setInteractive().on("pointerdown",this.upgarde),this.buttons[e.key].name=e.key,this.buttons[e.key].level=e.level,this.buttons[e.key].cost=Math.floor(this.buttons[e.key].level/10)+1;var t={font:"".concat(.023*ze.width,"px DishOut"),fill:"#FFFFFF"};this.buttons[e.key].textCost=this.add.text(this.buttons[e.key].x,this.buttons[e.key].y,"1",t).setOrigin(.5,-.125),this.buttons[e.key].crystal=this.add.sprite(this.buttons[e.key].x,this.buttons[e.key].y,"ruby").setOrigin(.5,.05).setScale(.15),this.buttons[e.key].textCost.x-=this.buttons[e.key].crystal.displayWidth/2,this.buttons[e.key].crystal.x+=this.buttons[e.key].crystal.displayWidth/2,this.buttons[e.key].clicked=!1,this.checkAvailable(this.buttons[e.key])}},{key:"decreaseMoney",value:function(e){if(!ze.money)return!1;ze.money-=e,localStorage.setItem("money",ze.money),this.moneyText.text=ze.money}},{key:"upgarde",value:function(){var e=this;if(!this.clicked&&this.active){var t=localStorage.getItem("playerWeapon_".concat(this.name));if(!1!==this.scene.decreaseMoney(this.cost)){localStorage.setItem("playerWeapon_".concat(this.name),++t),this.level=t;var n=Qe({init:!1,key:this.name}),r=1;"scale"===this.name&&(r=100),n=(Math.round(ze.Weapons.fire[this.name]*r)/r*r).toFixed(0),this.scene.statsText[this.name].text="".concat(this.name.toUpperCase()," (").concat(ze.weapons_units[this.name],"): ").concat(n),this.scene.statsLevel[this.name].text="Lvl. "+localStorage.getItem("playerWeapon_".concat(this.name)),this.clicked=!0,this.setAlpha(1),this.scene.tweens.add({targets:this,ease:"Linear",alpha:.5,duration:1e3,onComplete:function(){e.clicked=!1;for(var t=0;t<Object.keys(ze.Weapons.fire).length;t++){var n=Object.keys(ze.Weapons.fire)[t];e.scene.checkAvailable(e.scene.buttons[n])}}}),this.scene.createUpgradeAnimation(this.name,t)}}else this.active||this.scene.sounds.error.play({volume:.3})}},{key:"createUpgradeAnimation",value:function(e,t){var n=this;this.sounds.upgrade.play({volume:.2});for(var r=10+t,i=function(){var i={x:n.player.x-.6*n.player.displayWidth+1.2*n.player.displayWidth/r*o,y:Phaser.Math.Between(100*(n.player.y-.5*n.player.displayHeight),100*(n.player.y+.5*n.player.displayHeight))/100,scale:.075*ze.height*(Phaser.Math.Between(25+t,50+t)/100),alpha:Phaser.Math.Between(75,100)/100,duration:Phaser.Math.Between(750,1250)},s=n.add.text(i.x,i.y,"+",{font:"".concat(i.scale,"px DishOut"),fill:"#".concat(ze.upgradeColors[e])}).setOrigin(.5).setAlpha(i.alpha).setStroke("#fafafa33",4);n.tweens.add({targets:s,y:Je.top,alpha:0,ease:"Linear",duration:i.duration,onComplete:function(){s.destroy()}})},o=0;o<r;o++)i()}},{key:"addReturnButton",value:function(){var e=this;this.add.sprite(Je.left+.015*ze.width,Je.top+.015*ze.width,"return").setAlpha(.65).setInteractive().on("pointerdown",(function(){e.scene.start("Levels")}),this)}},{key:"createSounds",value:function(){this.sounds||(this.sounds={wings:this.sound.add("wings"),upgrade:this.sound.add("upgrade"),error:this.sound.add("error")})}}])&&Se(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Pe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Pe(i)?i:String(i)),r)}var i}var Be=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this._colors={},this._colors.r=210,this._colors.g=0,this._colors.b=25,this._style={boxColor:14934490,x:ze.width/2-.5*ze.width/2,y:ze.height/2+.25*ze.height,width:.5*ze.width,height:.05*ze.height},this._progressBox=this.scene.add.graphics(),this._progressBar=this.scene.add.graphics(),this._showProgressBox(),this._setEvents()}var t,n;return t=e,(n=[{key:"_setEvents",value:function(){var e=this;this.scene.load.on("progress",this._showProgressBar,this),this.scene.load.on("complete",(function(){return e.scene.scene.start(i)}),this)}},{key:"_showProgressBox",value:function(){this._progressBox.fillStyle(this._style.boxColor).fillRect(this._style.x,this._style.y,this._style.width,this._style.height)}},{key:"_showProgressBar",value:function(e){this._colors.r=210-200*e,this._colors.g=225*e,this._progressBar.clear().fillStyle($e(this._colors)).fillRect(this._style.x,this._style.y,this._style.width*e,this._style.height)}}])&&je(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==Ee(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Ee(i)?i:String(i)),r)}var i}function Te(e,t){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Te(e,t)}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}var Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Te(e,t)}(s,Phaser.Scene);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ae(r);if(i){var n=Ae(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,"Preload")}return t=s,(n=[{key:"preload",value:function(){this._createBG(),new Be(this),this._preloadResources(),this._preloadOther()}},{key:"_createBG",value:function(){this.sceneBG=this.add.sprite(ze.width/2,ze.height/2,"bg").setAlpha(.925).setOrigin(.5).setInteractive();var e=this.cameras.main.width/this.sceneBG.width,t=this.cameras.main.height/this.sceneBG.height,n=Math.max(e,t);this.sceneBG.setScale(n).setScrollFactor(0)}},{key:"_preloadOther",value:function(){this.load.plugin("rexvirtualjoystickplugin","./assets/plugins/rexvirtualjoystickplugin.min.js",!0)}},{key:"_preloadResources",value:function(){var e=this;ze.Levels.forEach((function(t){return e.load.image("bg".concat(t.level),"./assets/sprites/bg".concat(t.level,".png"))})),a.forEach((function(t){return e.load.atlas(t,"./assets/sprites/".concat(t,".png"),"./assets/sprites/".concat(t,".json"))})),c.forEach((function(t){return e.load.image(t,"./assets/sprites/".concat(t,".png"))})),l.forEach((function(t){return e.load.audio(t,"./assets/sounds/".concat(t,".mp3"))}))}}])&&Re(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==De(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===De(i)?i:String(i)),r)}var i}function Ie(e,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ie(e,t)}function Fe(e){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fe(e)}var Ge,Ce,Me,He,Ve,Ne,Ke,Ue,qe,Xe,Ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}(s,Phaser.Scene);var t,n,r,i,o=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fe(r);if(i){var n=Fe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,"Start")}return t=s,(n=[{key:"create",value:function(e){this.createBG(e),this.createStartText(),void 0!==e.score&&this.createStats(e)}},{key:"createBG",value:function(e){var t=this;this.sceneBG=this.add.sprite(ze.width/2,ze.height/2,"bg").setAlpha(.925).setOrigin(.5).setInteractive();var n=this.cameras.main.width/this.sceneBG.width,r=this.cameras.main.height/this.sceneBG.height,i=Math.max(n,r);this.sceneBG.setScale(i).setScrollFactor(0),this.sceneBG.on("pointerdown",(function(){t.scene.start("Game",e)}),this)}},{key:"createStats",value:function(e){this.add.graphics().fillStyle("#000",.5).fillRoundedRect(ze.width/2-.15*ze.width,ze.height/2-.25*ze.height,.3*ze.width,.5*ze.height,.03*ze.width);var t=e.completed?"Level completed!":"Game over",n="Score: ".concat(e.score),r={font:"".concat(.03*ze.width,"px DishOut"),fill:"#f0f0f0"};this.add.text(ze.width/2,ze.height/2-.125*ze.height,t,r).setOrigin(.5),this.add.text(ze.width/2,ze.height/2+.125*ze.height,n,r).setOrigin(.5)}},{key:"createStartText",value:function(){this.startText=this.add.text(ze.width/2,Je.bottom-.05*ze.height,"Tap to start",{font:"".concat(.04*ze.width,"px DishOut"),fill:"#f0f0f0"}).setOrigin(.5);var e=this.startText.scale,t=this.add.timeline({at:0,targets:this.startText,scale:e+.18,ease:"Power2",duration:550},{targets:this.startText,scale:e,ease:"Power2",duration:550});t.loop=-1,t.play()}}])&&We(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(),ze={type:r.AUTO,width:1280,height:720,input:{activePointers:3},physics:{default:"arcade",arcade:{debug:!1}},backgroundColor:"#F3F3F3",parent:"gameDiv",orientation:r.Scale.LANDSCAPE,scale:{mode:r.Scale.ENVELOP,autoCenter:r.Scale.CENTER_BOTH},fps:60,scene:[p,Le,ue,de,Ye,oe,we,ke],currentLevelScene:null!==(Ge=localStorage.getItem("currentLevelScene"))&&void 0!==Ge?Ge:1,currentLevelPlayer:null!==(Ce=localStorage.getItem("currentLevelPlayer"))&&void 0!==Ce?Ce:1,totalScore:null!==(Me=localStorage.getItem("totalScore"))&&void 0!==Me?Me:0,money:null!==(He=localStorage.getItem("money"))&&void 0!==He?He:0,joystick:{radius:100,gap:35},level:{scoreCof:1.2,levelCof:1.3,score:500},Losses:{jet:null!==(Ve=localStorage.getItem("losses_jet"))&&void 0!==Ve?Ve:0,helicopter:null!==(Ne=localStorage.getItem("losses_helicopter"))&&void 0!==Ne?Ne:0,rocket:null!==(Ke=localStorage.getItem("losses_rocket"))&&void 0!==Ke?Ke:0,missile:null!==(Ue=localStorage.getItem("losses_missile"))&&void 0!==Ue?Ue:0},Player:{velocity:500},Enemies:{helicopter:{velocity:175,weapon:"rocket",nums:4},jet:{velocity:325,weapon:"missile",nums:4},strategic_jet:{velocity:400,weapon:"missile_2",nums:4}},Weapons:{fire:{reload:500,velocity:750,scale:.5},rocket:{reload:1500,velocity:-415,scale:.35},missile:{reload:1750,velocity:-575,scale:.45},missile_2:{reload:2e3,velocity:-1e3,scale:.5}},weapons_units:{reload:"ms",velocity:"m/s",scale:"%"},upgradeColors:{reload:"66E210",velocity:"FF2407",scale:"0291F7"},reward:{missile_2:750,strategic_jet:500,jet:375,helicopter:275,missile:150,rocket:100},Levels:[{level:1,name:"Kyiv Pechersk",x:485,y:175,enemies:5,enemiesDelay:2500,velocity:250},{level:2,name:"Odesa",x:506,y:490,enemies:8,enemiesDelay:2250,velocity:265},{level:3,name:"Kharkiv",x:758,y:179,enemies:11,enemiesDelay:2e3,velocity:285},{level:4,name:"Kyiv Podil",x:430,y:135,enemies:15,enemiesDelay:1750,velocity:315},{level:5,name:"Mariupol Azovstal",x:890,y:397,enemies:21,enemiesDelay:1600,velocity:325},{level:6,name:"Vinnitsia Tower",x:353,y:287,enemies:28,enemiesDelay:1450,velocity:335},{level:7,name:"Kyiv Voskresenka",x:435,y:195,enemies:39,enemiesDelay:1300,velocity:345},{level:8,name:"Lviv Plocha Runok",x:105,y:248,enemies:50,enemiesDelay:1150,velocity:350},{level:9,name:"Dnipro",x:720,y:311,enemies:65,enemiesDelay:1075,velocity:355},{level:10,name:"Genichesk",x:732,y:509,enemies:82,enemiesDelay:1e3,velocity:360},{level:11,name:"Donetsk",x:874,y:333,enemies:100,enemiesDelay:925,velocity:365},{level:12,name:"Zaporizha",x:735,y:366,enemies:120,enemiesDelay:850,velocity:370},{level:13,name:"Sevastopol Balaklava",x:676,y:640,enemies:145,enemiesDelay:775,velocity:375},{level:14,name:"Lugansk",x:956,y:261,enemies:200,enemiesDelay:700,velocity:380}],unlim:{unlim:!0,level:10,enemies:9999,enemiesDelay:1e3,velocity:380},firstTimePlay:null!==(qe=localStorage.getItem("firstTimePlay"))&&void 0!==qe?qe:"1"},Je=(new r.Game(ze),{});function Ze(){document.body.clientWidth/document.body.clientHeight==16/9?(Je.left=0,Je.right=ze.width,Je.top=0,Je.bottom=ze.height):document.body.clientWidth>=document.body.clientHeight?document.body.clientWidth/document.body.clientHeight<16/9?(Je.left=ze.width/2-ze.height/document.body.clientHeight*document.body.clientWidth/2,Je.right=ze.width/2+ze.height/document.body.clientHeight*document.body.clientWidth/2,Je.top=0,Je.bottom=ze.height):(Je.left=0,Je.right=ze.width,Je.top=(ze.height-ze.width/ze.height/(document.body.clientWidth/document.body.clientHeight)*ze.height)/2,Je.bottom=ze.height-(ze.height-ze.width/ze.height/(document.body.clientWidth/document.body.clientHeight)*ze.height)/2):(Je.left=ze.width/2-ze.height/document.body.clientHeight*document.body.clientWidth/2,Je.right=ze.width/2+ze.height/document.body.clientHeight*document.body.clientWidth/2,Je.top=0,Je.bottom=ze.height)}function Qe(e){return"reload"===e.key?ze.Weapons.fire[e.key]-=.05*ze.Weapons.fire[e.key]:ze.Weapons.fire[e.key]+=.05*ze.Weapons.fire[e.key],ze.Weapons.fire[e.key]}function $e(e){return"0x"+((1<<24)+(e.r<<16)+(e.g<<8)+e.b).toString(16).slice(1)}"0"!==localStorage.getItem("firstTimePlay")&&(Xe=Array(ze.Levels.length).fill(0),localStorage.setItem("hiScores",Xe),localStorage.setItem("unlimHiScores",0),Object.keys(ze.Losses).forEach((function(e){localStorage.setItem("losses_".concat(e),0)})),function(){for(var e=Object.keys(ze.Weapons.fire),t=0;t<e.length;t++){var n=e[t];localStorage.setItem("playerWeapon_".concat(n),1)}}(),localStorage.setItem("currentLevelPlayer",ze.currentLevelPlayer),localStorage.setItem("money",ze.money)),function(){for(var e=Object.keys(ze.Weapons.fire),t=0;t<e.length;t++)for(var n=e[t],r=localStorage.getItem("playerWeapon_".concat(n)),i=1;i<r;i++)"reload"===n?ze.Weapons.fire[n]-=.05*ze.Weapons.fire[n]:ze.Weapons.fire[n]+=.05*ze.Weapons.fire[n]}(),window.addEventListener("orientationchange",(function(){document.location.reload()})),window.addEventListener("resize",(function(){document.location.reload()}))}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}r.m=t,e=[],r.O=(t,n,i,o)=>{if(!n){var s=1/0;for(u=0;u<e.length;u++){for(var[n,i,o]=e[u],a=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(a=!1,o<s&&(s=o));if(a){e.splice(u--,1);var l=i();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,i,o]},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[s,a,c]=n,l=0;if(s.some((t=>0!==e[t]))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(c)var u=c(r)}for(t&&t(n);l<s.length;l++)o=s[l],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},n=self.webpackChunkinvaiders_must_die=self.webpackChunkinvaiders_must_die||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=r.O(void 0,[426],(()=>r(314)));i=r.O(i)})();