/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t,e={843:(t,e,r)=>{r.d(e,{vc:()=>ln,Vh:()=>gn,Yw:()=>mn,mj:()=>pn,vG:()=>dn,vq:()=>vn,vo:()=>hn,nU:()=>fn,Wg:()=>yn});var n=r(260),o="Boot",i="Preload",a="Levels",c="Campaign",s="GameScene",u="Upgrade",l="killed",h="enemies-killed",f="update",p=["dragon","jet","strategic_jet","helicopter","boom"],y=["fire","flag","rocket","missile","missile_2","button_campaign","button_unlim","button_upgrade","map","battle","ruby","flag","frame","stamp","close","return","pause","pause_bg","restart","play","scale","reload","velocity","progress_bar","progress_bar_fill","skobeeva","chief_commander","commander","president","next","life_icon","health_bar_empty","health_bar_fill","health"],d=["select","error","rocket_launch","fire_launch","missile_launch","missile_2_launch","explosion_small","wings","stamp","ready","died","win","upgrade","level_up","whoosh","whoosh_map","click","fire_effect","campaign_complete_song"],v=10/3,g=.03;function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function b(){b=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new A(n||[]);return o(a,"_invoke",{value:P(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function w(){}function _(){}var x={};u(x,a,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(I([])));S&&S!==r&&n.call(S,a)&&(x=S);var k=_.prototype=g.prototype=Object.create(x);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,c){var s=h(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==m(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=f;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=L(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(m(e)+" is not iterable")}return w.prototype=_,o(k,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,s,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(j.prototype),u(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function w(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,x(n.key),n)}}function x(t){var e=function(t,e){if("object"!=m(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:String(e)}function O(t,e,r){return e=k(e),function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,S()?Reflect.construct(e,r||[],k(t).constructor):e.apply(t,r))}function S(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(S=function(){return!!t})()}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}var j=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=O(this,e,[t])).name=t,r}var r,n,c,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(e,Phaser.Scene),r=e,n=[{key:"init",value:function(){if(this._createCenter(),!this.scale.isFullscreen){switch(this.scene.key){case o:case i:return}this.scale.startFullscreen()}fn(),this._createTranslations()}},{key:"_createCenter",value:function(){this._center={x:.5*this.scale.width,y:.5*this.scale.height}}},{key:"preload",value:function(){this.load.image("bg","./assets/sprites/bg.png")}},{key:"_createAvailableMoney",value:function(){var t=this,e={font:"".concat(.038*ln.width,"px ").concat(mn()),fill:"#FFFFFF"};this._moneyIcon=this.add.image(hn.right-.075*ln.height,hn.top+.075*ln.height,"ruby").setScale(.25).setAlpha(0).setInteractive().on("pointerdown",(function(){return t._onMoneyButtonClick()})),this._moneyValueText=this.add.text(this._moneyIcon.x-this._moneyIcon.displayWidth,this._moneyIcon.y,ln.money,e).setOrigin(.5).setAlpha(0),this._addAvailableMoneyTween()}},{key:"_addAvailableMoneyTween",value:(c=b().mark((function t(){var e=this;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.scene.scene.tweens.add({targets:[e._moneyIcon,e._moneyValueText],alpha:.85,ease:"Linear",duration:350,onComplete:function(){return t()}})})));case 1:case"end":return t.stop()}}),t)})),s=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=c.apply(t,e);function i(t){w(o,r,n,i,a,"next",t)}function a(t){w(o,r,n,i,a,"throw",t)}i(void 0)}))},function(){return s.apply(this,arguments)})},{key:"_createBg",value:function(){var t=this.add.image(this._center.x,this._center.y,"bg").setAlpha(.925).setOrigin(.5).setInteractive(),e=this.cameras.main.width/t.width,r=this.cameras.main.height/t.height,n=Math.max(e,r);t.setScale(n).setScrollFactor(0)}},{key:"_createReturnButton",value:function(){var t=this;this.add.image(hn.left+.03*ln.width,hn.top+.05*ln.height,"return").setAlpha(.65).setInteractive().on("pointerdown",(function(){return t._onReturnButtonClick()}))}},{key:"_onReturnButtonClick",value:function(){this.scene.start(a),this.sounds.click.play({volume:.2})}},{key:"_onMoneyButtonClick",value:function(){this.scene.start(u)}},{key:"_createTranslations",value:function(){this._translationTexts=dn(this)}},{key:"_getText",value:function(t){return this._translationTexts[t]}}],n&&_(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function L(){L=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new A(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(I([])));x&&x!==r&&n.call(x,a)&&(w=x);var O=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,c){var s=h(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==P(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=f;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(P(e)+" is not iterable")}return m.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(k.prototype),u(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function T(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function B(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){T(i,n,o,a,c,"next",t)}function c(t){T(i,n,o,a,c,"throw",t)}a(void 0)}))}}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,I(n.key),n)}}function I(t){var e=function(t,e){if("object"!=P(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==P(e)?e:String(e)}function C(t,e,r){return e=N(e),function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,F()?Reflect.construct(e,r||[],N(t).constructor):e.apply(t,r))}function F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(F=function(){return!!t})()}function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},R.apply(this,arguments)}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}function G(t,e){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},G(t,e)}var D=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,e,[o])}var r,n,a,c,s,u,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G(t,e)}(e,t),r=e,n=[{key:"init",value:function(){R(N(e.prototype),"init",this).call(this),fn(),this._buttons={},this._buttons_num=0}},{key:"create",value:(l=B(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._createBg(),this._createSounds(),t.next=4,this._createLogoAnimation();case 4:localStorage.getItem("lang")?this._createPressLabel():this._createButtons();case 5:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"preload",value:function(){R(N(e.prototype),"preload",this).call(this),this.load.image("pervious_logo","./assets/sprites/pervious_logo.png"),this.load.image("eng","./assets/sprites/eng.png"),this.load.image("ukr","./assets/sprites/ukr.png"),this.load.image("button","./assets/sprites/button_lang.png"),this.load.audio("click","./assets/sounds/click.mp3"),this.load.audio("whoosh","./assets/sounds/whoosh.mp3")}},{key:"_addButtonEventListeners",value:function(t){var e=this;t.on("pointerover",(function(){return t.setAlpha(1)})),t.on("pointerout",(function(){return t.setAlpha(.75)})),t.on("pointerdown",(function(){return e._langSelect(t)}))}},{key:"_createButtons",value:function(){this._createButton("ukr",.35),this._createButton("eng",.65)}},{key:"_createButton",value:(u=B(L().mark((function t(e,r){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._buttons_num++,this._createButtonSprite(e,r),this._createButtonText(this._buttons[e],e),this._createButtonFlagSprite(this._buttons[e],e),t.next=6,this._createButtonTweens(this._buttons[e]);case 6:this._addButtonEventListeners(this._buttons[e]);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return u.apply(this,arguments)})},{key:"_createButtonText",value:function(t,e){var r;switch(e){case"ukr":r="UKRAINIAN";break;case"eng":r="ENGLISH"}var n={font:"".concat(.04*ln.width,"px ").concat(ln.fonts.eng),fill:"#f0f0f0"};t.buttonText=this.add.text(t.x-.06*ln.width,t.y,r,n).setScale(3).setOrigin(.5).setAlpha(0)}},{key:"_createButtonFlagSprite",value:function(t,e){t.buttonFlag=this.add.image(t.x+.095*ln.width,t.y,e).setAlpha(0)}},{key:"_createButtonSprite",value:function(t,e){this._buttons[t]=this.add.image(.5*ln.width,ln.height*e,"button").setOrigin(.5).setScale(5).setAlpha(0).setInteractive(),this._buttons[t].name=t}},{key:"_createButtonTweens",value:(s=B(L().mark((function t(e){var r=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){r.tweens.add({targets:[e,e.buttonText],delay:375*r._buttons_num,alpha:.675,scale:.85,ease:"Linear",duration:225,onStart:function(){return r.sounds.whoosh.play({volume:.33})},onComplete:function(){return t()}}),r.tweens.add({targets:e.buttonFlag,delay:375*r._buttons_num,alpha:.675,scale:.4,ease:"Linear",duration:225,onStart:function(){return r.sounds.whoosh.play({volume:.33})},onComplete:function(){return t()}})}));case 2:case"end":return t.stop()}}),t)}))),function(t){return s.apply(this,arguments)})},{key:"_createLogoAnimation",value:(c=B(L().mark((function t(){var e,r,n,o,i,a=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.add.image(this._center.x,this._center.y,"pervious_logo").setAlpha(0),r=this.cameras.main.width/e.width,n=this.cameras.main.height/e.height,o=Math.max(r,n),e.setScale(o).setScrollFactor(0),i=!localStorage.getItem("lang"),t.next=8,new Promise((function(t){a.tweens.add({targets:e,alpha:1,ease:"Linear",duration:1750,yoyo:i,onComplete:function(){return t()}})}));case 8:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"_createPressLabel",value:(a=B(L().mark((function t(){var e,r,n,o=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={font:"".concat(.035*ln.width,"px ").concat(ln.fonts.eng),fill:"#f0f0f0"},r=this.add.text(.5*ln.width,hn.bottom,"PRESS ANYWHERE TO CONTINUE",e).setOrigin(.5,1.5).setAlpha(0),n=this.add.rectangle(0,0,ln.width,ln.height).setOrigin(0),t.next=5,new Promise((function(t){o.tweens.add({targets:r,alpha:.5,ease:"Linear",duration:350,onComplete:function(){return t()}})}));case 5:this.tweens.add({targets:r,scale:1.15,alpha:1,ease:"Linear",duration:500,repeat:-1,yoyo:!0}),n.setInteractive(),n.on("pointerdown",(function(){return o._click()}));case 8:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"_langSelect",value:function(t){this._click(),yn(t.name)}},{key:"_click",value:function(){this.sounds.click.play({volume:.2}),this.scene.start(i)}},{key:"_createSounds",value:function(){this.sounds||(this.sounds={click:this.sound.add("click"),whoosh:this.sound.add("whoosh")})}}],n&&A(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(j);function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W(n.key),n)}}function W(t){var e=function(t,e){if("object"!=H(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H(e)?e:String(e)}function V(t,e,r){return e=Y(e),function(t,e){if(e&&("object"===H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,U()?Reflect.construct(e,r||[],Y(t).constructor):e.apply(t,r))}function U(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(U=function(){return!!t})()}function Y(t){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Y(t)}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}var q=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=V(this,e,[t.scene,t.x,t.y,t.texture,t.frame])).init(t),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(e,Phaser.GameObjects.Sprite),r=e,(n=[{key:"init",value:function(t){this.scene.add.existing(this),this.scene.physics.add.existing(this),this.body.enable=!0,this.velocity=t.velocity,this.reward=t.reward,this.damage=t.damage,this.move(),this.scene.events.on(f,this.update,this)}},{key:"reset",value:function(t,e){this.x=t,this.y=e,this.setAlive(!0)}},{key:"update",value:function(){this.active&&this.isDead()&&this.setAlive(!1)}},{key:"setAlive",value:function(t){this.body.enable=t,this.setVisible(t),this.setActive(t),this.timer&&(this.timer.paused=!t),t||(this.emit("killed"),this.launch_sound&&this.launch_sound.destroy())}},{key:"isDead",value:function(){return!this.body.enable}},{key:"move",value:function(){this.body.setVelocityX(this.velocity)}}])&&M(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function z(){z=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(B([])));x&&x!==r&&n.call(x,a)&&(w=x);var O=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,c){var s=h(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==K(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=f;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function B(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(K(e)+" is not iterable")}return m.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(k.prototype),u(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function J(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function Q(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){J(i,n,o,a,c,"next",t)}function c(t){J(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$(n.key),n)}}function $(t){var e=function(t,e){if("object"!=K(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==K(e)?e:String(e)}function tt(t,e,r){return e=rt(e),function(t,e){if(e&&("object"===K(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,et()?Reflect.construct(e,r||[],rt(t).constructor):e.apply(t,r))}function et(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(et=function(){return!!t})()}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}function nt(t,e){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nt(t,e)}var ot=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),tt(this,e,arguments)}var r,n,o,i,a,c,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nt(t,e)}(e,t),r=e,n=[{key:"createSound",value:function(t){this.launch_sound=t.scene.sound.add("".concat(t.weapon.texture,"_launch")),this.launch_sound.play({volume:.35})}},{key:"move",value:(s=Q(z().mark((function t(){return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=this.texture.key,t.next="rocket"===t.t0?3:"missile"===t.t0?5:"missile_2"===t.t0?7:9;break;case 3:return this._rocketMove(),t.abrupt("break",10);case 5:return this._missileMove(),t.abrupt("break",10);case 7:return this._missile2Move(),t.abrupt("break",10);case 9:this.body.setVelocityX(this.velocity);case 10:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"_rocketMove",value:(c=Q(z().mark((function t(){var e,r;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Phaser.Math.Between(500,1e3);case 1:if(this.isDead()){t.next=9;break}return r=.01*Phaser.Math.Between(-20,20),this.body.setVelocityX(this.velocity),t.next=6,gn(this.scene,e);case 6:this.body.setVelocityY(this.velocity*r),t.next=1;break;case 9:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"_missileMove",value:(a=Q(z().mark((function t(){return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.body.setVelocityY(230),this.body.setVelocityX(0*this.velocity),t.next=4,gn(this.scene,250);case 4:this.body.setVelocityY(.035*this.velocity),this.body.setVelocityX(this.velocity);case 6:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"_missile2Move",value:(i=Q(z().mark((function t(){return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.body.setVelocityY(280),this.body.setVelocityX(.1*this.velocity),t.next=4,gn(this.scene,250);case 4:this.body.setVelocityY(.05*this.velocity),this.body.setVelocityX(this.velocity);case 6:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"reset",value:function(){return!1}},{key:"isDead",value:function(){return this.x>ln.width+this.displayWidth||this.x<-this.displayWidth}}],o=[{key:"generate",value:function(t,r){return new e({scene:t,x:r.x+.5*r.displayWidth*r.weapon.origin.x,y:r.y,texture:r.weapon.texture,velocity:r.weapon.velocity,scale:r.weapon.scale,damage:r.weapon.damage,reward:ln.reward[r.weapon.texture]})}}],n&&Z(r.prototype,n),o&&Z(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(q);function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ct(n.key),n)}}function ct(t){var e=function(t,e){if("object"!=it(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==it(e)?e:String(e)}function st(t,e,r){return e=lt(e),function(t,e){if(e&&("object"===it(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ut()?Reflect.construct(e,r||[],lt(t).constructor):e.apply(t,r))}function ut(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ut=function(){return!!t})()}function lt(t){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lt(t)}function ht(t,e){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ht(t,e)}var ft=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),st(this,e,[t.physics.world,t])}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ht(t,e)}(e,Phaser.Physics.Arcade.Group),r=e,(n=[{key:"createFire",value:function(t){if(t.active){var e=ot.generate(this.scene,t);e.setScale(t.weapon.scale),this.add(e),e.move(),this.createdCount++,e.createSound(t)}}}])&&at(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dt(n.key),n)}}function dt(t){var e=function(t,e){if("object"!=pt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pt(e)?e:String(e)}function vt(t,e,r){return e=bt(e),function(t,e){if(e&&("object"===pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gt()?Reflect.construct(e,r||[],bt(t).constructor):e.apply(t,r))}function gt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gt=function(){return!!t})()}function mt(){return mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},mt.apply(this,arguments)}function bt(t){return bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bt(t)}function wt(t,e){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wt(t,e)}var _t="dragon",xt="dragon1",Ot="fly",St=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=vt(this,e,[{scene:t.scene,x:hn.left,y:.5*ln.height,texture:_t,frame:xt,velocity:ln.player.velocity,weapon:{texture:"fire",delay:ln.weapons.fire.reload,velocity:ln.weapons.fire.velocity,scale:ln.weapons.fire.scale,damage:ln.weapons.fire.damage,origin:{x:1,y:.5}}}]))._createAnimation(),r.play(Ot),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wt(t,e)}(e,t),r=e,(n=[{key:"init",value:function(t){mt(bt(e.prototype),"init",this).call(this,t),this.scene.add.existing(this),this.scene.physics.add.existing(this),this.body.enable=!0,this.fires=new ft(this.scene),this.weapon=t.weapon,this.scale=ln.player.scale,this.scene.events.on(f,this._updateFrame,this),this._lastFrame=xt,this._tweenFly=null,this.maxHealth=ln.player.maxHealth,this.currentHealth=ln.player.maxHealth}},{key:"shooting",value:function(){var t,e,r=this;(this.scene.cursors.space.isDown||null!==(t=this.scene.fireButton)&&void 0!==t&&t.active)&&!this._firesActivate&&(null===(e=this.scene.fireButton)||void 0===e||e.setAlpha(.95),this.fires.createFire(this),this._firesActivate=!0,this.scene.time.addEvent({delay:this.weapon.delay,callback:function(){var t;r._firesActivate=!1,null===(t=r.scene.fireButton)||void 0===t||t.setAlpha(.65)},callbackScope:this}))}},{key:"move",value:function(){this.body.setVelocity(0),this.y<hn.top+this.displayHeight/1.5?this.y=hn.top+this.displayHeight/1.5:this.y>hn.bottom-this.displayHeight/1.5&&(this.y=hn.bottom-this.displayHeight/1.5),this.x<hn.left+this.displayWidth/1.5?this.x=hn.left+this.displayWidth/1.5:this.x>hn.right-this.displayWidth/1.5&&(this.x=hn.right-this.displayWidth/1.5),this._handling()}},{key:"_createAnimation",value:function(){if(!this.scene.anims.anims.entries[Ot]){var t=this.scene.anims.generateFrameNames(_t,{prefix:_t,start:1,end:6});this.scene.anims.create({key:Ot,frames:t,frameRate:8,repeat:-1}),this.play(Ot)}}},{key:"_updateFrame",value:function(){this.active&&this._addTweenFly()}},{key:"_addTweenFly",value:function(){var t=this;if(this.frame.name!==this._lastFrame){var e=this.y;"dragon6"===this.frame.name?this._tweenFly=this.scene.tweens.add({targets:this,y:e+this.displayHeight/4,ease:"Linear",duration:350,onComplete:function(){return t._tweenFly=null}}):"dragon3"===this.frame.name&&(this._tweenFly=this.scene.tweens.add({targets:this,y:e-this.displayHeight/4,ease:"Linear",duration:350,onComplete:function(){return t._tweenFly=null}}),this.scene.sounds.wings.play({volume:.1}))}this._lastFrame=this.frame.name}},{key:"_handling",value:function(){var t,e=100,r=!1;for(var n in this.scene.cursorKeys)this.scene.cursorKeys[n].isDown&&(r=!0,(e=Math.floor(100*this.scene.joystick.force)/100)>100&&(e=100));if(t=r?this.scene.cursorKeys:this.scene.cursors){if(t.left.isDown){if(this.x<this.x-this.velocity)return;this.body.setVelocityX(-this.velocity*(e/100))}else if(t.right.isDown){if(this.x>this.x+this.velocity)return;this.body.setVelocityX(this.velocity*(e/100))}if(t.up.isDown||t.down.isDown)if(this._tweenFly&&(this._tweenFly.paused=!0),t.up.isDown){if(this.y<this.y-this.velocity)return;this.body.setVelocityY(-this.velocity*(e/100))}else if(t.down.isDown){if(this.y>this.y+this.velocity)return;this.body.setVelocityY(this.velocity*(e/100))}}}}])&&yt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(q);function kt(t){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function Et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jt(n.key),n)}}function jt(t){var e=function(t,e){if("object"!=kt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kt(e)?e:String(e)}function Pt(t,e,r){return e=Bt(e),function(t,e){if(e&&("object"===kt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Lt()?Reflect.construct(e,r||[],Bt(t).constructor):e.apply(t,r))}function Lt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Lt=function(){return!!t})()}function Tt(){return Tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Tt.apply(this,arguments)}function Bt(t){return Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bt(t)}function At(t,e){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},At(t,e)}var It=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Pt(this,e,arguments)}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&At(t,e)}(e,t),r=e,o=[{key:"generateAttr",value:function(t){var e=hn.right+.25*ln.width,r=Phaser.Math.Between(hn.top+.5*t.maxEnemyFrameHeight,hn.bottom-.5*t.maxEnemyFrameHeight),n=0;t.info.index>4&&(n=1,t.info.index>8&&(n=2));var o=Object.keys(ln.enemies)[Phaser.Math.Between(0,n)];return{x:e,y:r,enemyTexture:"enemy".concat(Phaser.Math.Between(1,ln.enemies[o].textureNum)),enemyType:o}}},{key:"generate",value:function(t,r){var n=e.generateAttr(t);return new e({scene:t,fires:r,x:n.x,y:n.y,enemyType:n.enemyType,texture:n.enemyType,frame:n.enemyTexture,velocity:-1*ln.enemies[n.enemyType].velocity})}}],(n=[{key:"init",value:function(t){Tt(Bt(e.prototype),"init",this).call(this,t),this._setInitialData(t),this._setWeapon(),this._addTimer()}},{key:"stopTimer",value:function(){this._firesActivate=!1}},{key:"reset",value:function(){var t=e.generateAttr(this.scene);Tt(Bt(e.prototype),"reset",this).call(this,t.x,t.y),this.setWeapon(),this.setFrame(t.frame)}},{key:"isDead",value:function(){return this.x<-this.displayWidth}},{key:"_addTimer",value:function(){this.timer=this.scene.time.addEvent({delay:ln.weapons[this.weapon.texture].reload*(.01*Phaser.Math.Between(70,130)),loop:!0,callback:this._shooting,callbackScope:this})}},{key:"_setInitialData",value:function(t){var e=t.enemyType,r=t.texture,n=t.fires;this._enemyType=e,this._firesActivate=!0,this.reward=ln.reward[r],this.fires=n,this.scale=ln.enemies[e].scale}},{key:"_setWeapon",value:function(){var t=this._enemyType,e=ln.enemies[t].weapon,r=ln.weapons[e],n=r.reload,o=r.velocity,i=r.scale,a=r.damage;this.weapon={texture:ln.enemies[t].weapon,delay:n,velocity:o,scale:i,damage:null!=a?a:100,origin:{x:-1,y:.5}}}},{key:"_shooting",value:function(){this._firesActivate&&this.fires.createFire(this)}}])&&Et(r.prototype,n),o&&Et(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(q);function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rt(n.key),n)}}function Rt(t){var e=function(t,e){if("object"!=Ct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ct(e)?e:String(e)}function Nt(t,e,r){return e=Dt(e),function(t,e){if(e&&("object"===Ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ht(t)}(t,Gt()?Reflect.construct(e,r||[],Dt(t).constructor):e.apply(t,r))}function Gt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Gt=function(){return!!t})()}function Dt(t){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dt(t)}function Ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mt(t,e){return Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mt(t,e)}var Wt=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Nt(this,e,[t.physics.world,t])).scene=t,r.fires=new ft(r.scene),r.countMax=r.scene.info.enemies,r.killed=0,r.createdCount=0,r.timer=r.scene.time.addEvent({delay:r.scene.info.enemiesDelay,loop:!0,callback:r.tick,callbackScope:Ht(r)}),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mt(t,e)}(e,Phaser.Physics.Arcade.Group),r=e,(n=[{key:"tick",value:function(){this.scene.time.addEvent({delay:this.scene.info.enemiesDelay*(.01*Phaser.Math.Between(50,150)),callback:this.createEnemy,callbackScope:this})}},{key:"stopTimer",value:function(){this.timer.remove()}},{key:"createEnemy",value:function(){if(this.countMax>this.createdCount){var t=It.generate(this.scene,this.fires);t.on(l,this.onEnemyKilled,this),this.add(t),t.move(),this.createdCount++}else this.timer.remove()}},{key:"onEnemyKilled",value:function(){this.killed++,this.killed>=this.countMax&&this.scene.events.emit(h)}}])&&Ft(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Vt(t){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vt(t)}function Ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yt(n.key),n)}}function Yt(t){var e=function(t,e){if("object"!=Vt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vt(e)?e:String(e)}function Xt(t,e,r){return e=Kt(e),function(t,e){if(e&&("object"===Vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zt(t)}(t,qt()?Reflect.construct(e,r||[],Kt(t).constructor):e.apply(t,r))}function qt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qt=function(){return!!t})()}function Kt(t){return Kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kt(t)}function zt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jt(t,e){return Jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jt(t,e)}var Qt="explosion",Zt="boom",$t=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Xt(this,e,[t.scene,t.x,t.y])).scene.add.existing(zt(r)),r.scene.physics.add.existing(zt(r)),r.body.enable=!0,r._createAnimation(),r.play(Qt),r.once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){r.destroy()})),r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jt(t,e)}(e,Phaser.GameObjects.Sprite),r=e,o=[{key:"generate",value:function(t,r,n){return new e({scene:t,x:r,y:n})}}],(n=[{key:"_createAnimation",value:function(){if(!this.scene.anims.anims.entries[Qt]){var t=this.scene.anims.generateFrameNames(Zt,{prefix:Zt,start:1,end:7});this.scene.anims.create({key:Qt,frames:t,frameRate:8,repeat:0})}}}])&&Ut(r.prototype,n),o&&Ut(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ee(){ee=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(B([])));x&&x!==r&&n.call(x,a)&&(w=x);var O=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,c){var s=h(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==te(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=f;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function B(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(te(e)+" is not iterable")}return m.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(k.prototype),u(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function re(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function ne(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){re(i,n,o,a,c,"next",t)}function c(t){re(i,n,o,a,c,"throw",t)}a(void 0)}))}}function oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ie(n.key),n)}}function ie(t){var e=function(t,e){if("object"!=te(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==te(e)?e:String(e)}function ae(t,e,r){return e=se(e),function(t,e){if(e&&("object"===te(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ce()?Reflect.construct(e,r||[],se(t).constructor):e.apply(t,r))}function ce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ce=function(){return!!t})()}function se(t){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},se(t)}function ue(t,e){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ue(t,e)}var le=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ae(this,e,[t]))._scene=t,r._init(),r._create(),r._add(),r}var r,n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ue(t,e)}(e,Phaser.GameObjects.Container),r=e,n=[{key:"updateHealthBar",value:(i=ne(ee().mark((function t(){var e,r,n,o=arguments;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]&&o[0],this._scene.player.currentHealth,r=this._scene.player.currentHealth<=0?0:this._scene.player.currentHealth/this._scene.player.maxHealth,((n=this._healthBarFill.displayWidth*r)<0||!n)&&(n=this._healthBarFill.displayWidth,this.visible=!1),!e){t.next=7;break}return t.abrupt("return",this._onUpdateComplete(n));case 7:return t.abrupt("return",this._tweenUpdate(n));case 8:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"_onUpdateComplete",value:function(t){this._healthBarFill.frame.cutWidth=t,this._healthBarFill.frame.updateUVs()}},{key:"_tweenUpdate",value:(o=ne(ee().mark((function t(e){var r,n=this;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=150,t.next=4,new Promise((function(t){n._scene.tweens.add({targets:n,scale:.4255,ease:"Power2.in",duration:r,onComplete:function(){n._onUpdateComplete(e),t()}})}));case 4:return t.next=6,new Promise((function(t){n._scene.tweens.add({targets:n,scale:.37,ease:"Power2.out",duration:.75*r,onComplete:function(){return t()}})}));case 6:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})},{key:"_add",value:function(){this.add([this._healthBar,this._healthBarFill,this._heartIcon])}},{key:"_init",value:function(){this.setScale(.37)}},{key:"_create",value:function(){this._createHealthBar(),this._createHeartIcon()}},{key:"_createHealthBar",value:function(){this._healthBar=this._scene.add.sprite(0,0,"health_bar_empty").setAlpha(.95),this._healthBarFill=this._scene.add.sprite(this._healthBar.x-.0185*this._healthBar.width,this._healthBar.y,"health_bar_fill").setAlpha(.95),this.updateHealthBar(!0)}},{key:"_createHeartIcon",value:function(){this._heartIcon=this._scene.add.sprite(this._healthBar.x-.53*this._healthBar.width,this._healthBar.y,"life_icon").setAlpha(.95)}}],n&&oe(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}function fe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pe(n.key),n)}}function pe(t){var e=function(t,e){if("object"!=he(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==he(e)?e:String(e)}function ye(t,e,r){return e=ge(e),function(t,e){if(e&&("object"===he(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,de()?Reflect.construct(e,r||[],ge(t).constructor):e.apply(t,r))}function de(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(de=function(){return!!t})()}function ve(){return ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ge(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ve.apply(this,arguments)}function ge(t){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ge(t)}function me(t,e){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},me(t,e)}var be=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ye(this,e,[s])}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&me(t,e)}(e,t),r=e,(n=[{key:"init",value:function(t){ve(ge(e.prototype),"init",this).call(this),this.info=t,this._currentLevelScene=this.info.index,this._currentScore=0,this._blackBG=null}},{key:"create",value:function(t){this.cursors=this.input.keyboard.createCursorKeys(),this._createBg(t),this._getMaxEnemyHeightFrame(),this._createPlayer(),this._createHealthBar(),this._createEnemies(),this._createCompleteEvents(),this._setupOverlapping(),this._createSounds(),this._createScoreText(),this._createMobileButtons(),this._createPauseButton(),this._createExpProgressBar()}},{key:"update",value:function(){this._sceneBG.tilePositionX+=this._sceneBG.width/1e4*this.speed,this._dumpJoyStickState(),this._player.move(),this._player.shooting(),this._healthBar.setPosition(this._player.x,this._player.y-.5*this._player.height)}},{key:"joystick",get:function(){return this._joystick}},{key:"player",get:function(){return this._player}},{key:"_createMobileButtons",value:function(){document.body.clientWidth>1280||(this._addJoystick(),this._addFireButton())}},{key:"_addJoystick",value:function(){var t=hn.left,e=hn.bottom,r=ln.joystick,n=r.radius,o=r.gap;this._joystick=this.plugins.get("rexvirtualjoystickplugin").add(this,{x:t+n+o,y:e-n-o,radius:n,base:this.add.circle(0,0,n).setStrokeStyle(3.5,1729964).setAlpha(.75),thumb:this.add.circle(0,0,.5*n,13421772).setAlpha(.5),dir:"8dir"})}},{key:"_dumpJoyStickState",value:function(){this._joystick&&(this.cursorKeys=this._joystick.createCursorKeys())}},{key:"_addFireButton",value:function(){var t=this,e=hn.right,r=ln.joystick,n=r.radius,o=r.gap;this.fireButton=this.add.image(e-n-o,this._joystick.y,"fire").setAlpha(.65).setInteractive().setActive(!1).on("pointerup",(function(){t.fireButton.active=!1}),this).on("pointerdown",(function(){t.fireButton.active=!0,t._player.shooting()}),this)}},{key:"_createBg",value:function(t){var e=ln.levels,r=ln.height,n=ln.width,o=null!=t&&t.unlim?"bg".concat(Phaser.Math.Between(1,e.length)):"bg".concat(t.index),i=r/this.textures.list[o].source[0].height;this.speed=e[this._currentLevelScene-1].velocity,1!==i&&(this.speed/=i),this._sceneBG=this.add.tileSprite(0,0,n,r,o).setOrigin(0).setScale(i).setAlpha(.65)}},{key:"_createScoreText",value:function(){var t,e=hn.right,r=hn.top,n=ln.width;this.hiScoreText&&this.hiScoreText.destroy(),this.scoreText=this.add.text(e-.05*n,r+.02*n,this._currentScore,{font:"".concat(.038*n,"px ").concat(mn()),fill:"#EA0000"}).setOrigin(1,0).setAlpha(.75),null!==(t=this.info)&&void 0!==t&&t.unlim&&(this.hiScoreText=this.add.text(this._center.x,r+.01*n,"".concat(this._getText("TOP_HIGH_SCORE")," ").concat(localStorage.getItem("unlimHiScores")),{font:"".concat(.03*n,"px ").concat(mn()),fill:"#EA0000"}).setOrigin(.5,0).setAlpha(.75))}},{key:"_createPlayer",value:function(){this._player=new St({scene:this})}},{key:"_createEnemies",value:function(){this._enemies=new Wt(this)}},{key:"_createSounds",value:function(){this.sounds||(this.sounds={rocket_launch:this.sound.add("rocket_launch"),fire_launch:this.sound.add("fire_launch"),missile_launch:this.sound.add("missile_launch"),explosion_small:this.sound.add("explosion_small"),wings:this.sound.add("wings"),died:this.sound.add("died"),win:this.sound.add("win"),level_up:this.sound.add("level_up")})}},{key:"_setupOverlapping",value:function(){this.physics.add.overlap(this._player.fires,this._enemies,this._onOverlap,void 0,this),this.physics.add.overlap(this._enemies.fires,this._player,this._onOverlap,void 0,this),this.physics.add.overlap(this._player.fires,this._enemies.fires,this._onOverlap,void 0,this),this.physics.add.overlap(this._player,this._enemies,this._onOverlap,void 0,this)}},{key:"_onOverlap",value:function(t,e){if(!(e.x>ln.width+.5*e.displayWidth)){if(t!==this._player&&e!==this._player){var r,n;if(null===(r=this.info)||void 0===r||!r.unlim){var o=e.texture.key;"strategic_jet"===e.texture.key?o="jet":"missile_2"===e.texture.key&&(o="missile");var i=Number(localStorage.getItem("casualties_".concat(o)));localStorage.setItem("casualties_".concat(o),++i)}var a=Number((e.reward*Math.pow(ln.level.scoreCof,this._currentLevelScene-1)).toFixed(0));if(this._currentScore+=a,null===(n=this.info)||void 0===n||!n.unlim){var c=Number(ln.totalScore);localStorage.setItem("totalScore",c+a),ln.totalScore=c+a}this.scoreText.text=this._currentScore,this._updateExpProgressBar()}t===this._player?this._onPlayerHit(t,e):t.setAlive(!1),e.setAlive(!1),this.sounds.explosion_small.play(),$t.generate(this,e.x,e.y)}}},{key:"_onPlayerHit",value:function(t,e){var r,n=this._enemies.children.contains(e)?this._player.maxHealth:e.damage,o=2*n/this._player.maxHealth*.05,i=125;this._player.currentHealth-=n,(r=this.cameras.main).flash.apply(r,[i].concat([255,0,0])),this.cameras.main.shake(i,o),this._healthBar.updateHealthBar(),this._player.currentHealth<=0&&t.setAlive(!1)}},{key:"_createCompleteEvents",value:function(){this._player.emit(l),this._player.once(l,this._onComplete,this),this.events.once(h,this._onComplete,this)}},{key:"_onComplete",value:function(){var t=this;if(!this._blackBG){this._blackBG=this.add.rectangle(.5*ln.width,.5*ln.height,ln.width,ln.height,"0x000000",0).setInteractive().setDepth(3);var e=this.add.text(this._blackBG.x,this._blackBG.y,"",{font:"".concat(.03*ln.width,"px ").concat(mn()),fill:"#EA0000"}).setOrigin(.5).setAlpha(0).setDepth(5);if(this.game.sound.stopAll(),this._player.active){if(this.sounds.win.play(),e.text=this._getText("FINAL_TEXT_WIN"),this.info.hiScore<this._currentScore){var r=localStorage.getItem("hiScores").split(",");r[this._currentLevelScene-1]=this._currentScore,localStorage.setItem("hiScores",r.join())}ln.currentLevelScene<=this._currentLevelScene&&(ln.currentLevelScene++,localStorage.setItem("currentLevelScene",ln.currentLevelScene))}else e.text=this._getText("FINAL_TEXT_LOSE"),this.sounds.died.play(),this.info.unlim&&localStorage.getItem("unlimHiScores")<this._currentScore&&localStorage.setItem("unlimHiScores",this._currentScore);this.tweens.add({targets:[this._blackBG,e],fillAlpha:1,alpha:1,scale:2*e.scale,ease:"Linear",duration:1e3*this.sounds.died.duration*.75,onComplete:function(){t.scene.start(t.info.unlim?a:c),t.scene.stop()}}),this._enemies.stopTimer(),this._enemies.children.entries.forEach((function(t){t.stopTimer()}))}}},{key:"_createPauseButton",value:function(){var t=this;this.add.image(hn.left+.05*ln.width,hn.top+.05*ln.width,"pause").setAlpha(.65).setScale(2).setInteractive().on("pointerdown",(function(){t.scene.launch("Pause"),t.scene.pause()}),this)}},{key:"_createHealthBar",value:function(){this._healthBar=new le(this),this.add.existing(this._healthBar)}},{key:"_createExpProgressBar",value:function(){var t;null!==(t=this.info)&&void 0!==t&&t.unlim||(this._progressExpBar=this.add.image(this._center.x,hn.top+.0225*ln.width,"progress_bar").setAlpha(.95),this._progressExpBar.fillProgress=this.add.image(this._progressExpBar.x+.1*this._progressExpBar.displayWidth,this._progressExpBar.y+.04*this._progressExpBar.displayHeight,"progress_bar_fill").setAlpha(.95),this._progressExpBar.levelText=this.add.text(this._progressExpBar.x-.38*this._progressExpBar.displayWidth,this._progressExpBar.y-.035*this._progressExpBar.displayHeight,ln.currentLevelPlayer,{font:"".concat(.53*this._progressExpBar.displayHeight,"px ").concat(mn()),fill:"#FFFFFF"}).setOrigin(.5).setAlpha(.75),this._updateExpProgressBar())}},{key:"_updateExpProgressBar",value:function(){var t;if(null===(t=this.info)||void 0===t||!t.unlim){var e={start:this._getRequiredScoreOnLevel(ln.currentLevelPlayer-1),end:this._getRequiredScoreOnLevel(ln.currentLevelPlayer),diff:this._getRequiredScoreOnLevel(ln.currentLevelPlayer)-this._getRequiredScoreOnLevel(ln.currentLevelPlayer-1)},r=(ln.totalScore-e.start)/e.diff;ln.currentLevelPlayer<2&&(r=ln.totalScore/e.diff),r>=1&&(this._increaseLevel(),e={start:this._getRequiredScoreOnLevel(ln.currentLevelPlayer-1),end:this._getRequiredScoreOnLevel(ln.currentLevelPlayer),diff:this._getRequiredScoreOnLevel(ln.currentLevelPlayer)-this._getRequiredScoreOnLevel(ln.currentLevelPlayer-1)},r=1- -1*(ln.totalScore-e.end)/e.diff),this._progressExpBar.fillProgress.frame.cutWidth=this._progressExpBar.fillProgress.displayWidth*r,this._progressExpBar.fillProgress.frame.updateUVs(),this._progressExpBar.text=ln.currentLevelPlayer}}},{key:"_increaseLevel",value:function(){var t=this;this.sounds.level_up.play({volume:.5}),ln.currentLevelPlayer++,localStorage.setItem("currentLevelPlayer",ln.currentLevelPlayer);var e=this.add.text(this._center.x,this._center.y,ln.currentLevelPlayer,{font:"".concat(.25*ln.width,"px ").concat(mn()),fill:"#FFFFFF"}).setOrigin(.5).setAlpha(0);this.tweens.add({targets:e,alpha:1,x:this._progressExpBar.levelText.x,y:this._progressExpBar.levelText.y,scale:this._progressExpBar.levelText.displayWidth/e.displayWidth,ease:"Linear",duration:500,onComplete:function(){e.destroy(),t._progressExpBar.levelText.text=ln.currentLevelPlayer}}),this._increaseMoney()}},{key:"_getRequiredScoreOnLevel",value:function(t){for(var e=0,r=0;r<t;r++)e+=Number((ln.level.score*Math.pow(ln.level.levelCof,r)).toFixed(0));return e}},{key:"_increaseMoney",value:function(){++ln.money,localStorage.setItem("money",ln.money)}},{key:"_getMaxEnemyHeightFrame",value:function(){var t=0,e=this.textures.list.helicopter.frames;Object.keys(e).forEach((function(r){e[r].cutHeight>t&&(t=e[r].height)})),this.maxEnemyFrameHeight=t}}])&&fe(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(j);function we(t){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(t)}function _e(){_e=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(B([])));x&&x!==r&&n.call(x,a)&&(w=x);var O=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,c){var s=h(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==we(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=f;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function B(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(we(e)+" is not iterable")}return m.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(k.prototype),u(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function xe(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function Oe(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){xe(i,n,o,a,c,"next",t)}function c(t){xe(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Se(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ke(n.key),n)}}function ke(t){var e=function(t,e){if("object"!=we(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==we(e)?e:String(e)}function Ee(t,e,r){return e=Le(e),function(t,e){if(e&&("object"===we(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,je()?Reflect.construct(e,r||[],Le(t).constructor):e.apply(t,r))}function je(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(je=function(){return!!t})()}function Pe(){return Pe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Le(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Pe.apply(this,arguments)}function Le(t){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Le(t)}function Te(t,e){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Te(t,e)}var Be=[{sprite:"button_campaign",y:.275,text:"CAMPAIGN",startScene:c},{sprite:"button_unlim",y:.5,text:"UNLIM",startScene:s},{sprite:"button_upgrade",y:.725,text:"UPGRADE",startScene:u}],Ae=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ee(this,e,[a])}var r,n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Te(t,e)}(e,t),r=e,n=[{key:"init",value:function(){Pe(Le(e.prototype),"init",this).call(this),this._buttons=[]}},{key:"create",value:function(){this._createBg(),this._createSounds(),this._createButtons()}},{key:"_addButtonEventListeners",value:function(t,e){var r=this;t.on("pointerover",(function(){return t.setAlpha(1)})),t.on("pointerout",(function(){return t.setAlpha(.75)})),t.on("pointerdown",(function(){return r._gameSelect(t,e)}))}},{key:"_createButtons",value:function(){var t=this;Be.forEach((function(e){return t._createButton(e)}))}},{key:"_createButton",value:(i=Oe(_e().mark((function t(e){var r;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this._createButtonSprite(e.sprite,e.y),this._createButtonText(r,e.text),t.next=4,this._createButtonTweens(r);case 4:this._addButtonEventListeners(r,e.startScene);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"_createButtonText",value:function(t,e){var r={font:"".concat(.03*ln.width,"px ").concat(mn()),fill:"#f0f0f0"};t.buttonText=this.add.text(t.x,t.y,this._getText(e),r).setScale(3).setOrigin(.5).setAlpha(0)}},{key:"_createButtonSprite",value:function(t,e){var r=this.add.image(this._center.x,ln.height*e,t).setOrigin(.5).setScale(5).setAlpha(0).setInteractive();return this._buttons.push(r),r}},{key:"_createButtonTweens",value:(o=Oe(_e().mark((function t(e){var r,n=this;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=375*this._buttons.length,Promise.all([new Promise((function(t){n.tweens.add({targets:[e,e.buttonText],delay:r,alpha:.675,scale:.65,ease:"Linear",duration:225,onStart:function(){return n.sounds.whoosh.play({volume:.33})},onComplete:function(){return t()}})})),new Promise((function(t){n.tweens.add({targets:e.buttonText,delay:r,alpha:.9,scale:1,ease:"Linear",duration:225,onComplete:function(){return t()}})}))]);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"_gameSelect",value:function(t,e){var r=this;this.sounds.click.play({volume:.2}),this.tweens.add({targets:[t,t.buttonText],alpha:0,scale:7,ease:"Linear",duration:750,onComplete:function(){return r._startNewScene(e)}})}},{key:"_startNewScene",value:function(t){t===s?this.scene.start(s,ln.unlim):this.scene.start(t)}},{key:"_createSounds",value:function(){this.sounds||(this.sounds={click:this.sound.add("click"),whoosh:this.sound.add("whoosh")})}}],n&&Se(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(j);function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function Ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fe(n.key),n)}}function Fe(t){var e=function(t,e){if("object"!=Ie(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ie(e)?e:String(e)}var Re=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._state="pending",this._callbacks=[]}var e,r;return e=t,(r=[{key:"resolve",value:function(){"pending"===this._state&&(this._state="resolved",this._callbacks.forEach((function(t){return t()})))}},{key:"reject",value:function(){"pending"===this._state&&(this._state="rejected",this._callbacks.forEach((function(t){return t()})))}},{key:"wait",value:function(){var t=this;return new Promise((function(e,r){"pending"!==t._state?"resolved"===t._state?e():r():t._callbacks.push((function(){"resolved"===t._state?e():r()}))}))}}])&&Ce(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ne(t){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ne(t)}function Ge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,De(n.key),n)}}function De(t){var e=function(t,e){if("object"!=Ne(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ne(e)?e:String(e)}function He(t,e,r){return e=We(e),function(t,e){if(e&&("object"===Ne(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Me()?Reflect.construct(e,r||[],We(t).constructor):e.apply(t,r))}function Me(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Me=function(){return!!t})()}function We(t){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},We(t)}function Ve(t,e){return Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ve(t,e)}var Ue=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=He(this,e,[t,r.x,r.y]))._scene=t,n._width=0,n._height=0,n.create(r),n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ve(t,e)}(e,Phaser.GameObjects.Container),r=e,(n=[{key:"create",value:function(t){var e=t.width,r=t.height,n=t.radius,o=t.fillColor,i=t.fillAlpha;this._width=e,this._height=r;var a=this._scene.add.graphics();a.fillStyle(o,i),a.fillRoundedRect(0,0,e,r,n),this.add(a),this._scene.add.existing(this)}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}])&&Ge(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Ye(t){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function Xe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qe(n.key),n)}}function qe(t){var e=function(t,e){if("object"!=Ye(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ye(e)?e:String(e)}function Ke(t,e,r){return e=Je(e),function(t,e){if(e&&("object"===Ye(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ze()?Reflect.construct(e,r||[],Je(t).constructor):e.apply(t,r))}function ze(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ze=function(){return!!t})()}function Je(t){return Je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Je(t)}function Qe(t,e){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qe(t,e)}var Ze=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ke(this,e,[t]))._scene=t,n._resolver=new Re,n._createDialog(r),n._setInitPosition(),n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qe(t,e)}(e,Phaser.GameObjects.Container),r=e,(n=[{key:"showEnter",value:function(){var t=this;return new Promise((function(e){t._elements.forEach((function(r){t._scene.tweens.add({targets:r,x:r.x+ln.width,ease:"Cubic.easeOut",duration:625,onStart:function(){return t._showSkipButton()},onComplete:function(){return e()}})}))}))}},{key:"showExit",value:function(){var t=this;return new Promise((function(e){t._elements.forEach((function(r){t._scene.tweens.add({targets:r,x:r.x-ln.width,ease:"Cubic.easeIn",duration:425,onStart:function(){return t._hideSkipButton()},onComplete:function(){return e()}})}))}))}},{key:"resolver",get:function(){return this._resolver}},{key:"_setInitPosition",value:function(){this._elements=[this._bg,this._person,this._text],this._elements.forEach((function(t){return t.x-=ln.width}))}},{key:"_createDialog",value:function(t){this._createSpeechBg(),this._createPerson(t),this._createText(t),this._createSkipButton()}},{key:"_createSpeechBg",value:function(){var t=.08*ln.width,e=hn.width-2*t,r=.55*ln.height,n=hn.left+t,o=hn.bottom-r,i=.025*e;this._bg=new Ue(this._scene,{width:e,height:r,radius:i,fillColor:0,fillAlpha:.6}),this._bg.setPosition(n,o)}},{key:"_createSkipButton",value:function(){var t=this,e=this._bg.y+.5*this._bg.height;this._skipButton=this._scene.add.image(hn.right,e,"next").setAlpha(0).setOrigin(1,.5).setDepth(4).on("pointerdown",(function(){return t._skipDialog()}))}},{key:"_createPerson",value:function(t){var e=t.image,r=this._scene.textures.getFrame("president").width,n=this._bg.x+.25*r,o=this._bg.y+this._bg.height;this._person=this._scene.add.image(n,o,e).setDepth(4).setOrigin(.5,1)}},{key:"_createText",value:function(t){var e=t.text,r=.037*ln.width,n=.025*ln.width,o=.02*ln.width,i=this._person.x+.5*this._person.width,a=this._bg.x+this._bg.width-i-2*o,c=this._bg.x+.5*this._bg.width+.5*this._person.width-.5*o,s=this._bg.y+.5*this._bg.height,u=this._scene.add.text(0,0,e,{font:"".concat(r,"px ").concat(mn()),lineSpacing:.5*r,color:"#A0A0A0",align:"left"}).setDepth(4).setWordWrapWidth(a);(u=this._resizeContent(u,o,n,a)).setPosition(c,s),u.setOrigin(.5),this._text=u}},{key:"_showSkipButton",value:function(){var t=this;this._scene.tweens.add({targets:this._skipButton,alpha:1,ease:"Power1",duration:250,onComplete:function(){return t._skipButton.setInteractive()}})}},{key:"_hideSkipButton",value:function(){var t=this;this._scene.tweens.add({targets:this._skipButton,alpha:0,ease:"Power1",duration:150,onStart:function(){return t._skipButton.removeInteractive()},onComplete:function(){return t._skipButton.destroy()}})}},{key:"_skipDialog",value:function(){this._resolver.resolve(),this._scene.sounds.click.play({volume:.2})}},{key:"_resizeContent",value:function(t,e,r,n){var o=.93*parseFloat(t.style.fontSize);return t.setFontSize(o),t.setWordWrapWidth(n),t.height>this._bg.height-r||t.width>n?this._resizeContent(t,e,r,n):t}}])&&Xe(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function $e(t){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(t)}function tr(){tr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(B([])));x&&x!==r&&n.call(x,a)&&(w=x);var O=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,c){var s=h(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==$e(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=f;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function B(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError($e(e)+" is not iterable")}return m.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(k.prototype),u(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function er(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function rr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){er(i,n,o,a,c,"next",t)}function c(t){er(i,n,o,a,c,"throw",t)}a(void 0)}))}}function nr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,or(n.key),n)}}function or(t){var e=function(t,e){if("object"!=$e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$e(e)?e:String(e)}var ir=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._scene=e,this._darkBg=this._scene.add.rectangle(.5*ln.width,.5*ln.height,ln.width,ln.height,"0x000000",.6).setAlpha(0)}var e,r,n,o,i;return e=t,r=[{key:"flowShow",value:(i=rr(tr().mark((function t(e){var r,n,o,i;return tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._setData(e),this._data){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this._toggleShowingBg(!0);case 5:r=this._data.length,this._addSoundsToScene(e,r),n=0;case 8:if(!(n<r)){t.next=20;break}return o=this._data[n],i=new Ze(this._scene,o),t.next=13,this._playShowingDialog(i,e,n);case 13:if(o!==this._data[r-1]){t.next=17;break}return t.next=17,gn(this._scene,200);case 17:n++,t.next=8;break;case 20:return t.next=22,this._toggleShowingBg(!1);case 22:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"_addSoundsToScene",value:function(t,e){for(var r=0;r<e;r++){var n="level".concat(t,"_text").concat(r,"_").concat(ln.lang);this._scene.sounds[n]=this._scene.sound.add(n)}}},{key:"_toggleShowingBg",value:(o=rr(tr().mark((function t(e){var r,n=this;return tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e?1:0,e&&(this._darkBg.setDepth(3),this._darkBg.setInteractive()),t.next=4,new Promise((function(t){n._scene.tweens.add({targets:n._darkBg,alpha:r,ease:"Power1",duration:250,onComplete:function(){return t()}})}));case 4:e||(this._darkBg.setDepth(0),this._darkBg.removeInteractive());case 5:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"_playShowingDialog",value:(n=rr(tr().mark((function t(e,r,n){var o,i,a;return tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.showEnter();case 2:return o="level".concat(r,"_text").concat(n,"_").concat(ln.lang),i=this._scene.sounds[o],a=Math.max(1e3*i.duration,2500),i.play(),t.next=8,Promise.race([e.resolver.wait(),gn(this._scene,a)]);case 8:return i.stop(),t.next=11,e.showExit();case 11:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return n.apply(this,arguments)})},{key:"_setData",value:function(t){this._data=this._scene.cache.json.get("dialogues".concat(t))}}],r&&nr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ar(t){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ar(t)}function cr(){cr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(B([])));x&&x!==r&&n.call(x,a)&&(w=x);var O=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,c){var s=h(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==ar(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=f;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function B(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ar(e)+" is not iterable")}return m.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(k.prototype),u(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function sr(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function ur(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){sr(i,n,o,a,c,"next",t)}function c(t){sr(i,n,o,a,c,"throw",t)}a(void 0)}))}}function lr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hr(n.key),n)}}function hr(t){var e=function(t,e){if("object"!=ar(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ar(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ar(e)?e:String(e)}function fr(t,e,r){return e=dr(e),function(t,e){if(e&&("object"===ar(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pr()?Reflect.construct(e,r||[],dr(t).constructor):e.apply(t,r))}function pr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pr=function(){return!!t})()}function yr(){return yr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dr(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},yr.apply(this,arguments)}function dr(t){return dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dr(t)}function vr(t,e){return vr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vr(t,e)}var gr={jet:{text:"TOTAL_CASUALTIES_JEST"},helicopter:{text:"TOTAL_CASUALTIES_HELICOPTERS"},rocket:{text:"TOTAL_CASUALTIES_ROCKETS"},missile:{text:"TOTAL_CASUALTIES_MISSILES"}},mr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),fr(this,e,[c])}var r,n,o,i,a,u,l,h,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vr(t,e)}(e,t),r=e,n=[{key:"preload",value:function(){this._createBg(),this._preloadDictateTextAudio()}},{key:"create",value:(f=ur(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._createControllers(),this._createSounds(),this._createMap(),this._createReturnButton(),t.next=6,this._createDots();case 6:return this._createBackgroundSound(),t.next=9,this._createCasualties();case 9:this._createAvailableMoney(),this._createInitialDialogs();case 11:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"_createMap",value:function(){this._map=this.add.image(this._center.x,this._center.y,"map").setAlpha(.65).setOrigin(.5).setScale(1.25)}},{key:"_createBackgroundSound",value:function(){ln.currentLevelScene>=ln.levels.length?this._addCampaignCompleteSound():this._addFireSound()}},{key:"_addFireSound",value:function(){this.sounds.fire_effect.play({volume:.05}),this.sounds.fire_effect.loop=!0}},{key:"_addCampaignCompleteSound",value:function(){this.sounds.campaign_complete_song.play({volume:.15}),this.sounds.campaign_complete_song.loop=!0}},{key:"_stopBackgroundSound",value:function(){this.sounds.fire_effect.stop(),this.sounds.campaign_complete_song.stop()}},{key:"_createDots",value:(h=ur(cr().mark((function t(){var e,r;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._dots=[],e=ln.levels.length;case 2:if(!(e>0)){t.next=9;break}return r=ln.levels[e-1],t.next=6,this._createDot(r);case 6:e--,t.next=2;break;case 9:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"_createDot",value:(l=ur(cr().mark((function t(e){var r,n,o,i,a=this;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=.5*(ln.width-this._map.displayWidth)+e.x/1e3*this._map.displayWidth,n=.5*(ln.height-this._map.displayHeight)+e.y/1e3*this._map.displayWidth,(o=this.add.image(r,n,"battle").setAlpha(0).setScale(6).setOrigin(.5).setInteractive().on("pointerdown",(function(){return a._selectLevel(o)}))).info=e,o.isCurrent=!1,i={alpha:1,scale:1},e.index>ln.currentLevelScene?(o.on("pointerdown",(function(){a.sounds.error.play({volume:.33})})),o.active=!1,i.alpha=.7,i.scale=.75):(o.setAlpha(1).on("pointerdown",(function(){return a._onDotClick})),o.active=!0,ln.currentLevelScene>e.index?o.setTexture("flag").setOrigin(0,1):o.isCurrent=!0),this._dots.push(o),this._createDotTween(o,i),t.abrupt("return",gn(this.scene,100));case 10:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"_onDotClick",value:function(){this.sounds.select.play({volume:.33}),this._startDialogs(level.index,2500)}},{key:"_createDotTween",value:function(t,e){var r=this;this.scene.scene.tweens.add({targets:t,alpha:e.alpha,scale:e.scale,ease:"easeInCirc",duration:250,onStart:function(){return r.sounds.whoosh_map.play({volume:.1})},onComplete:function(){t.isCurrent&&r._addDotCTAAnimation(t)}})}},{key:"_addDotCTAAnimation",value:function(t){t.setScale(1),this.tweens.add({targets:t,scale:1.5,duration:425,yoyo:!0,repeat:-1})}},{key:"_createLevelCard",value:(u=ur(cr().mark((function t(e){var r,n,o;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.add.rectangle(this._center.x,this._center.y,ln.width,ln.height,"0x000000",0).setInteractive(),n=localStorage.getItem("hiScores").split(",")[e.index-1]||0,e.hiScore=n,(o=this.add.image(this._center.x,this._center.y,"frame")).displayHeight=.795*ln.height,o.texts=[],o.texts.push(this.add.text(o.x,o.y-.5*o.displayHeight+.086*o.displayHeight,this._getText("MISSION_CARD_MAIN_TITLE"),{font:"".concat(.13*o.displayWidth,"px ").concat(mn()),fill:"#0a0a0a"}).setOrigin(.5).setAlpha(.55)),o.texts.push(this.add.text(o.x,o.y-.5*o.displayHeight+.25*o.displayHeight,"".concat(this._getText("MISSION_CARD_LEVEL")," ").concat(e.index),{font:"".concat(.0925*o.displayWidth,"px ").concat(mn()),fill:"#0a0a0a"}).setOrigin(.5).setAlpha(.8)),o.texts.push(this.add.text(o.x,o.y-.5*o.displayHeight+.37*o.displayHeight,this._getText("MISSION_CARD_CITY"),{font:"".concat(.055*o.displayWidth,"px ").concat(mn()),fill:"#0a0a0a"}).setOrigin(.5).setAlpha(.8)),o.texts.push(this.add.text(o.x,o.y-.5*o.displayHeight+.44*o.displayHeight,this._getText("LEVEL_".concat(e.index,"_NAME")),{font:"".concat(.06175*o.displayWidth,"px ").concat(mn()),fill:"#0a0a0a"}).setOrigin(.5).setAlpha(.8)),n>0&&o.texts.push(this.add.text(o.x,o.y-.5*o.displayHeight+.58*o.displayHeight,"".concat(this._getText("MISSION_CARD_SCORE")," ").concat(n),{font:"".concat(.049*o.displayWidth,"px ").concat(mn()),fill:"#E2B80D"}).setOrigin(.5).setAlpha(.8)),o.texts.push(this.add.text(o.x,o.y-.5*o.displayHeight+.71*o.displayHeight,"".concat(this._getText("MISSION_CARD_ENEMIES")," ").concat(e.enemies),{font:"".concat(.051*o.displayWidth,"px ").concat(mn()),fill:"#EA0000"}).setOrigin(.5).setAlpha(.8)),t.next=14,this._createStamp(o);case 14:this._createCardStartButton(o,e),this._createCardCloseButton(o,r);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"_createStamp",value:(a=ur(cr().mark((function t(e){var r,n,o,i=this;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.sounds.stamp.play(),r=Phaser.Math.Between(-45,45),e.stamp=this.add.image(e.x,e.y,"stamp").setAlpha(0).setAngle(r).setScale(2.5),n=e.x+.5*e.displayWidth-e.displayWidth*Phaser.Math.Between(25,40)/100,o=e.y+.5*e.displayWidth-e.displayHeight*Phaser.Math.Between(28,40)/100,t.next=7,new Promise((function(t){i.scene.scene.tweens.add({targets:e.stamp,scale:.26,x:n,y:o,alpha:.85,ease:"Power3",duration:350,onComplete:function(){return t()}})}));case 7:return t.next=9,new Promise((function(t){i.scene.scene.tweens.add({targets:e.stamp,scale:.305,alpha:.55,ease:"Power2",duration:250,onComplete:function(){return t()}})}));case 9:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_createCardStartButton",value:function(t,e){var r=this;t.startButton=this.add.text(t.x,t.y+.5*t.displayHeight-.09*t.displayHeight,this._getText("MISSION_CARD_START"),{font:"".concat(.105*t.displayWidth,"px ").concat(mn()),fill:"#51E04A"}).setOrigin(.5).setAlpha(.7).setInteractive().on("pointerdown",(function(){r._gameStart(e),r._stopBackgroundSound()})).on("pointerover",(function(){t.startButton.setAlpha(.9)})).on("pointerout",(function(){t.startButton.setAlpha(.7)}))}},{key:"_createCardCloseButton",value:function(t,e){var r=this;t.closeButton=this.add.image(t.x+.5*t.displayWidth-.033*ln.width,t.y-.5*t.displayHeight+.037*ln.width,"close").setOrigin(.5).setAlpha(.7).setInteractive().on("pointerdown",(function(){return r._cardClose({bgRect:e,frame:t})})).on("pointerover",(function(){return t.closeButton.setAlpha(.9)})).on("pointerout",(function(){return t.closeButton.setAlpha(.7)}))}},{key:"_createCasualties",value:function(){var t=this;this._casualtiesText&&this._casualtiesText.forEach((function(t){t.destroy()}));var e={x:hn.left+.033*ln.width,y:.635*ln.height};this._casualtiesText=[];var r=this.add.text(e.x,e.y,this._getText("TOTAL_CASUALTIES"),{font:"".concat(.025*ln.width,"px ").concat(mn()),fill:"#EA0000"}).setOrigin(0,.5).setAlpha(.75);return this._casualtiesText.push(r),Object.keys(ln.casualties).forEach(function(){var r=ur(cr().mark((function r(n){var o;return cr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.y+=.0285*ln.width,o=t.add.text(e.x,e.y,"".concat(t._getText(gr[n].text)," ").concat(localStorage.getItem("casualties_".concat(n))),{font:"".concat(.0215*ln.width,"px ").concat(mn()),fill:"#000000"}).setOrigin(0,.5).setAlpha(0),t._casualtiesText.push(o);case 3:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()),this._addCasualtiesTween()}},{key:"_addCasualtiesTween",value:(i=ur(cr().mark((function t(){var e,r;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this._casualtiesText.length)){t.next=9;break}return r=this._casualtiesText[e],t.next=5,gn(this.scene,125);case 5:this.scene.scene.tweens.add({targets:r,alpha:.7,ease:"Linear",duration:350});case 6:e++,t.next=1;break;case 9:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"_createControllers",value:function(){this._dialogBoxController=new ir(this)}},{key:"_createInitialDialogs",value:function(){1===ln.currentLevelScene&&0===Number(localStorage.getItem("totalScore"))&&this._startDialogs(0)}},{key:"_createSounds",value:function(){this.sounds||(this.sounds={click:this.sound.add("click"),select:this.sound.add("select"),error:this.sound.add("error"),stamp:this.sound.add("stamp"),ready:this.sound.add("ready"),whoosh_map:this.sound.add("whoosh_map"),fire_effect:this.sound.add("fire_effect"),campaign_complete_song:this.sound.add("campaign_complete_song")})}},{key:"_cardClose",value:function(t){this.sounds.click.play({volume:.2}),t.bgRect.destroy(),t.frame.destroy(),t.frame.stamp.destroy(),t.frame.startButton.destroy(),t.frame.closeButton.destroy(),t.frame.texts.forEach((function(t){t.destroy()}))}},{key:"_gameStart",value:function(t){var e=this;this.sounds.ready.play();var r=this.add.rectangle(this._center.x,this._center.y,ln.width,ln.height,"0x000000",0).setInteractive();this.tweens.add({targets:r,fillAlpha:1,ease:"Linear",duration:1e3*this.sounds.ready.duration*.85,onComplete:function(){return e.scene.start(s,t)}})}},{key:"_preloadDictateTextAudio",value:function(){for(var t=0;t<ln.levels.length;t++){var e=this.scene.scene.cache.json.get("dialogues".concat(t));if(!e)return;for(var r=0;r<e.length;r++){var n="level".concat(t,"_text").concat(r,"_").concat(ln.lang);this.load.audio(n,"./assets/voices/".concat(ln.lang,"/").concat(t,"/").concat(r,".mp3"))}}}},{key:"_selectLevel",value:function(t){var e=t.active,r=t.info;e&&this._createLevelCard(r)}},{key:"_startDialogs",value:(o=ur(cr().mark((function t(e){var r,n=arguments;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:1e3,t.next=3,gn(this.scene,r);case 3:return t.next=5,this._dialogBoxController.flowShow(e);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"_onReturnButtonClick",value:function(){yr(dr(e.prototype),"_onReturnButtonClick",this).call(this),this._stopBackgroundSound()}},{key:"_onMoneyButtonClick",value:function(){yr(dr(e.prototype),"_onMoneyButtonClick",this).call(this),this._stopBackgroundSound()}}],n&&lr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(j);function br(t){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},br(t)}function wr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_r(n.key),n)}}function _r(t){var e=function(t,e){if("object"!=br(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==br(e)?e:String(e)}function xr(t,e,r){return e=Sr(e),function(t,e){if(e&&("object"===br(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Or()?Reflect.construct(e,r||[],Sr(t).constructor):e.apply(t,r))}function Or(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Or=function(){return!!t})()}function Sr(t){return Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sr(t)}function kr(t,e){return kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kr(t,e)}var Er=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),xr(this,e,["Pause"])}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kr(t,e)}(e,t),r=e,(n=[{key:"create",value:function(){this._createBg(),this._createButtons(),this._toggleMenu()}},{key:"_createBg",value:function(){this._blackBG=this.add.rectangle(this._center.x,this._center.y,ln.width,ln.height,"0x000000",0),this._sceneBG=this.add.image(this._center.x,-1*ln.height,"pause_bg").setOrigin(.5),this.tweens.add({targets:this._sceneBG,y:this._center.x,ease:"Linear",duration:750})}},{key:"_createButtons",value:function(){var t=this;this._play_button=this.add.image(this._sceneBG.x,this._sceneBG.y,"play").setOrigin(.5).setScale(.8).setAlpha(.85).setInteractive().on("pointerdown",(function(){return t._toggleMenu("resume")}),this).on("pointerover",(function(){return t._play_button.setAlpha(1)})).on("pointerout",(function(){return t._play_button.setAlpha(.85)})),this._restart_button=this.add.image(this._sceneBG.x+.25*this._sceneBG.displayWidth,this._sceneBG.y,"restart").setOrigin(.5).setScale(1.25).setAlpha(.65).setInteractive().on("pointerdown",(function(){return t._toggleMenu("restart")}),this).on("pointerover",(function(){return t._restart_button.setAlpha(1)})).on("pointerout",(function(){return t._restart_button.setAlpha(.65)})),this._return_button=this.add.image(this._sceneBG.x-.25*this._sceneBG.displayWidth,this._sceneBG.y,"return").setOrigin(.5).setScale(1.25).setAlpha(.65).setInteractive().on("pointerdown",(function(){return t._toggleMenu("return")}),this).on("pointerover",(function(){return t._return_button.setAlpha(1)})).on("pointerout",(function(){return t._return_button.setAlpha(.65)}))}},{key:"_toggleMenu",value:function(t){var e=this,r=this._sceneBG.y<0?hn.top+.5*this._sceneBG.displayHeight:-1*ln.height;this.tweens.add({targets:this._sceneBG,y:r,ease:"Linear",duration:750,onComplete:function(){switch(t){case"resume":e.scene.resume(s);break;case"restart":e.scene.start(s);break;case"return":e.scene.stop(s),e.scene.launch(c)}}}),this.tweens.add({targets:[this._play_button,this._restart_button,this._return_button],y:r+.06085*this._sceneBG.displayHeight,ease:"Linear",duration:750})}}])&&wr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(j);function jr(t){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(t)}function Pr(){Pr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(B([])));x&&x!==r&&n.call(x,a)&&(w=x);var O=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,c){var s=h(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==jr(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=f;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function B(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(jr(e)+" is not iterable")}return m.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(k.prototype),u(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Lr(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function Tr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Lr(i,n,o,a,c,"next",t)}function c(t){Lr(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Br(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ar(n.key),n)}}function Ar(t){var e=function(t,e){if("object"!=jr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jr(e)?e:String(e)}function Ir(t,e,r){return e=Rr(e),function(t,e){if(e&&("object"===jr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Cr()?Reflect.construct(e,r||[],Rr(t).constructor):e.apply(t,r))}function Cr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Cr=function(){return!!t})()}function Fr(){return Fr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rr(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Fr.apply(this,arguments)}function Rr(t){return Rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rr(t)}function Nr(t,e){return Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nr(t,e)}var Gr={health:{text:"HEALTH_TITLE",color:"ff2407"},reload:{text:"RELOAD_TITLE",color:"66e210"},velocity:{text:"VELOCITY_TITLE",color:"ffdc45"},scale:{text:"SCALE_TITLE",color:"0291f7"}},Dr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ir(this,e,[u])}var r,n,o,i,c,s,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nr(t,e)}(e,t),r=e,n=[{key:"init",value:function(){Fr(Rr(e.prototype),"init",this).call(this),this.buttons={}}},{key:"create",value:(l=Tr(Pr().mark((function t(){return Pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._createBg(),this._createSounds(),this._createReturnButton(),t.next=5,this._createPlayer();case 5:return this._createAvailableMoney(),t.next=8,this._createStats();case 8:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"_createPlayer",value:(s=Tr(Pr().mark((function t(){var e=this;return Pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._player=new St({scene:this}),t.next=3,new Promise((function(t){e.tweens.add({targets:e._player,x:.125*ln.width,ease:"Linear",duration:1250,onComplete:function(){return t()}})}));case 3:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"_createStats",value:(c=Tr(Pr().mark((function t(){var e,r,n,o,i,a,c,s,u,l,h,f,p;return Pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.statsText={},this.statsIcon={},this.statsLevel={},e={font:"".concat(.031*ln.width,"px ").concat(mn()),fill:"#000000"},r=this._getText("BOTTOM_DESCRIPTION")+" ".concat(100*g,"%"),n=this.add.text(this._center.x,hn.bottom-.075*ln.height,r,e).setOrigin(.5).setAlpha(0),o=Object.keys(ln.currentUpgradableStats),i=.4*ln.height,a=0;case 9:if(!(a<o.length)){t.next=28;break}return c=o[a],s=this._setStatsText(c),u=.57*ln.width,l=this._center.y-.5*i+i/o.length*a,h=localStorage.getItem("playerAbilityLevel_".concat(c)),f="".concat(this._getText(Gr[c].text)," ").concat(s),p="".concat(this._getText("LEVEL_TEXT")," ").concat(h),this.statsText[c]=this.add.text(u,l,f,e).setOrigin(1,0).setAlpha(0),this.statsIcon[c]=this.add.image(u+.06*ln.width,l,c).setOrigin(.5,.15).setAlpha(0).setDisplaySize(.045*ln.width,.045*ln.width),this.statsLevel[c]=this.add.text(u+.12*ln.width,l,p,e).setOrigin(0,0).setAlpha(0),t.next=22,this._playShowStatsAnimation(c);case 22:return this._createUpgradeButton({x:u,y:l,key:c,level:h}),t.next=25,gn(this.scene,250);case 25:a++,t.next=9;break;case 28:return t.next=30,gn(this.scene,350);case 30:this._playShowStatsBottomInfo(n);case 31:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"_playShowStatsAnimation",value:function(t){var e=this;return new Promise((function(r){e.tweens.add({targets:[e.statsText[t],e.statsIcon[t],e.statsLevel[t]],ease:"Linear",alpha:.75,duration:325,onComplete:r()})}))}},{key:"_playShowStatsBottomInfo",value:function(t){this.tweens.add({targets:t,ease:"Linear",alpha:.75,duration:350})}},{key:"_setStatsText",value:function(t){var e=1,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?pn(t):1;switch(t){case"health":r=(Math.round(ln.player.maxHealth*e)/e*e).toFixed(0);break;case"reload":r=(Math.round(ln.weapons.fire[t]*e)/e*e).toFixed(0);break;case"scale":e=100*v,r=(Math.round(ln.weapons.fire[t]*e)/e*e).toFixed(0);case"velocity":r=(Math.round(ln.weapons.fire[t]*e)/e*e).toFixed(0)}return r}},{key:"_checkAvailability",value:function(t){if(ln.money<t.cost||ln.money<=0)return this._toggleButton(t,!1);this._toggleButton(t,!0)}},{key:"_checkAvailabilityForAllButtons",value:function(){var t=this;Object.keys(ln.currentUpgradableStats).forEach((function(e){t._checkAvailability(t.buttons[e])}))}},{key:"_toggleButton",value:function(t,e){var r=e?.9:.5;t.active=e,t.setAlpha(r),t.textCost.setAlpha(r),t.crystal.setAlpha(r)}},{key:"_disableButtons",value:function(){var t=this;Object.keys(this.buttons).forEach((function(e){var r=t.buttons[e];t._toggleButton(r,!1)}))}},{key:"_setPrice",value:function(t){t.cost=Math.floor(t.level/10)+1,t.textCost.text=t.cost}},{key:"_createUpgradeButton",value:function(t){var e=this,r=this.add.image(t.x+.323*ln.width,t.y,"button_campaign").setOrigin(.5,.125).setScale(.33).setAlpha(0).setInteractive().setVisible(!1).on("pointerdown",(function(){return e._upgrade(r)}));r.name=t.key,r.level=t.level,r.cost=Math.floor(r.level/10)+1;var n={font:"".concat(.023*ln.width,"px ").concat(mn()),fill:"#FFFFFF"};r.textCost=this.add.text(r.x,r.y,"1",n).setOrigin(.5,-.125).setVisible(!1),r.crystal=this.add.image(r.x,r.y,"ruby").setOrigin(.5,.05).setScale(.15).setVisible(!1),r.textCost.x-=.5*r.crystal.displayWidth,r.crystal.x+=.5*r.crystal.displayWidth,r.clicked=!1,this._checkAvailability(r),this._setPrice(r);var o=r.alpha;r.alpha=0,r.textCost.alpha=0,r.crystal.alpha=0,this.tweens.add({targets:[r,r.textCost,r.crystal],ease:"Linear",alpha:o,duration:500,onStart:function(){r.setVisible(!0),r.textCost.setVisible(!0),r.crystal.setVisible(!0)}}),this.buttons[t.key]=r}},{key:"_decreaseMoney",value:function(t){if(!ln.money)return!1;ln.money-=t,localStorage.setItem("money",ln.money),this._moneyValueText.text=ln.money}},{key:"_upgrade",value:function(t){var e=this;if(!t.clicked&&t.active){var r=localStorage.getItem("playerAbilityLevel_".concat(t.name));if(!1!==this._decreaseMoney(t.cost)){localStorage.setItem("playerAbilityLevel_".concat(t.name),++r),t.level=r;var n=this._setStatsText(t.name,!0);return this.statsText[t.name].text="".concat(this._getText(Gr[t.name].text)," ").concat(n),this.statsLevel[t.name].text="".concat(this._getText("LEVEL_TEXT")," ").concat(localStorage.getItem("playerAbilityLevel_".concat(t.name))),t.clicked=!0,t.setAlpha(1),this.tweens.add({targets:this,ease:"Linear",alpha:.5,duration:1e3,onStart:function(){e._disableButtons(),e._setPrice(t)},onComplete:function(){t.clicked=!1,e._checkAvailabilityForAllButtons()}}),this._createUpgradeAnimation(t.name,r)}}else t.active||this.sounds.error.play({volume:.3})}},{key:"_createUpgradeAnimation",value:(i=Tr(Pr().mark((function t(e,r){var n,o,i,a,c,s,u,l,h,f;return Pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.sounds.upgrade.play({volume:.2}),o=15+2*(n=r>50?50:r),i=0;i<o;i++)a=Phaser.Math.Between(this._player.x-.57*this._player.displayWidth,this._player.x+.57*this._player.displayWidth),c=Phaser.Math.Between(this._player.y-.57*this._player.displayHeight,this._player.y+.57*this._player.displayHeight),(s=Phaser.Math.Between(50+2*n,75+2*n)/100)>1&&(s=1),u="".concat(.075*ln.height*s,"px ").concat(mn()),l="#".concat(Gr[e].color),h=Phaser.Math.Between(500,1e3),f=this.add.text(a,c,"+",{font:u,fill:l}).setOrigin(.5).setAlpha(0).setStroke("#fafafa33",4),this._playPlusUpgradeTweenAnimation(f,h);return t.abrupt("return",gn(this.scene,3e3));case 9:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"_playPlusUpgradeTweenAnimation",value:(o=Tr(Pr().mark((function t(e,r){return Pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.tweens.add({targets:e,alpha:1,ease:"Back.Out(1.5)",duration:r}),t.next=3,gn(this.scene,.5*r);case 3:this.tweens.add({targets:e,y:hn.top,alpha:0,ease:"Back.In",duration:r,onComplete:function(){return e.destroy()}});case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"_addReturnButton",value:function(){var t=this;this.add.sprite(hn.left+.015*ln.width,hn.top+.015*ln.width,"return").setAlpha(.65).setInteractive().on("pointerdown",(function(){return t.scene.start(a)}),this)}},{key:"_createSounds",value:function(){this.sounds||(this.sounds={click:this.sound.add("click"),wings:this.sound.add("wings"),upgrade:this.sound.add("upgrade"),error:this.sound.add("error")})}},{key:"_onMoneyButtonClick",value:function(){}}],n&&Br(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(j);function Hr(t){return Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hr(t)}function Mr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wr(n.key),n)}}function Wr(t){var e=function(t,e){if("object"!=Hr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Hr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hr(e)?e:String(e)}var Vr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=e,this._colors={},this._colors.r=210,this._colors.g=0,this._colors.b=25,this._style={boxColor:14934490,x:.5*ln.width-.5*ln.width*.5,y:.5*ln.height+.25*ln.height,width:.5*ln.width,height:.05*ln.height},this._progressBox=this.scene.add.graphics(),this._progressBar=this.scene.add.graphics(),this._showProgressBox(),this._setEvents()}var e,r;return e=t,(r=[{key:"_setEvents",value:function(){var t=this;this.scene.load.on("progress",this._showProgressBar,this),this.scene.load.on("complete",(function(){return t.scene.scene.start(a)}),this)}},{key:"_showProgressBox",value:function(){this._progressBox.fillStyle(this._style.boxColor).fillRect(this._style.x,this._style.y,this._style.width,this._style.height)}},{key:"_showProgressBar",value:function(t){this._colors.r=210-200*t,this._colors.g=225*t,this._progressBar.clear().fillStyle(vn(this._colors)).fillRect(this._style.x,this._style.y,this._style.width*t,this._style.height)}}])&&Mr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ur(t){return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ur(t)}function Yr(){Yr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};u(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(B([])));x&&x!==r&&n.call(x,a)&&(w=x);var O=b.prototype=g.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,c){var s=h(t[o],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==Ur(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=f;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=j(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=h(e,r,n);if("normal"===u.type){if(o=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=d,n.method="throw",n.arg=u.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function B(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ur(e)+" is not iterable")}return m.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},S(k.prototype),u(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Xr(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function qr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kr(n.key),n)}}function Kr(t){var e=function(t,e){if("object"!=Ur(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ur(e)?e:String(e)}function zr(t,e,r){return e=Qr(e),function(t,e){if(e&&("object"===Ur(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jr()?Reflect.construct(e,r||[],Qr(t).constructor):e.apply(t,r))}function Jr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jr=function(){return!!t})()}function Qr(t){return Qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qr(t)}function Zr(t,e){return Zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zr(t,e)}var $r,tn,en,rn,nn,on,an,cn,sn,un=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zr(this,e,[i])}var r,n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zr(t,e)}(e,t),r=e,n=[{key:"preload",value:(o=Yr().mark((function t(){return Yr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._createBg(),this._preloadTexts(),this._preloadResources(),this._preloadPlugins(),this._preloadDialogues(),new Vr(this);case 6:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){Xr(i,r,n,a,c,"next",t)}function c(t){Xr(i,r,n,a,c,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"_preloadTexts",value:function(){this.load.json("texts","./assets/texts/".concat(ln.lang,".json"))}},{key:"_preloadPlugins",value:function(){this.load.plugin("rexvirtualjoystickplugin","./assets/plugins/rexvirtualjoystickplugin.min.js",!0)}},{key:"_preloadDialogues",value:function(){var t=this;this.load.json("dialogues0","./assets/dialogues/".concat(ln.lang,"/0.json")),ln.levels.forEach((function(e){return t.load.json("dialogues".concat(e.index),"./assets/dialogues/".concat(ln.lang,"/").concat(e.index,".json"))}))}},{key:"_preloadResources",value:function(){var t=this;ln.levels.forEach((function(e){return t.load.image("bg".concat(e.index),"./assets/sprites/bg".concat(e.index,".png"))})),p.forEach((function(e){return t.load.atlas(e,"./assets/sprites/".concat(e,".png"),"./assets/sprites/".concat(e,".json"))})),y.forEach((function(e){return t.load.image(e,"./assets/sprites/".concat(e,".png"))})),d.forEach((function(e){return t.load.audio(e,"./assets/sounds/".concat(e,".mp3"))}))}}],n&&qr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(j),ln={type:n.AUTO,width:1280,height:720,input:{activePointers:3},physics:{default:"arcade",arcade:{debug:!1}},backgroundColor:"#F3F3F3",orientation:n.Scale.LANDSCAPE,scale:{mode:n.Scale.ENVELOP,autoCenter:n.Scale.CENTER_BOTH,parent:"gameDiv"},scene:[D,un,Ae,mr,be,Er,Dr],lang:"",fonts:{eng:"DishOut",ukr:"Pangolin"},currentLevelScene:null!==($r=localStorage.getItem("currentLevelScene"))&&void 0!==$r?$r:1,currentLevelPlayer:null!==(tn=localStorage.getItem("currentLevelPlayer"))&&void 0!==tn?tn:1,totalScore:null!==(en=localStorage.getItem("totalScore"))&&void 0!==en?en:0,money:null!==(rn=localStorage.getItem("money"))&&void 0!==rn?rn:0,joystick:{radius:100,gap:35},level:{scoreCof:1.185,levelCof:1.315,score:500},casualties:{jet:null!==(nn=localStorage.getItem("casualties_jet"))&&void 0!==nn?nn:0,helicopter:null!==(on=localStorage.getItem("casualties_helicopter"))&&void 0!==on?on:0,rocket:null!==(an=localStorage.getItem("casualties_rocket"))&&void 0!==an?an:0,missile:null!==(cn=localStorage.getItem("casualties_missile"))&&void 0!==cn?cn:0},player:{maxHealth:100,currentHealth:100,velocity:350,scale:.75,currentWeapon:localStorage.getItem("currentPlayerWeapon")},currentUpgradableStats:{health:1,reload:1,velocity:1,scale:1},enemies:{helicopter:{velocity:110,weapon:"rocket",textureNum:4,scale:.75},jet:{velocity:250,weapon:"missile",textureNum:4,scale:.76},strategic_jet:{velocity:200,weapon:"missile_2",textureNum:4,scale:.83}},weapons:{fire:{reload:500,velocity:500,scale:.3},rocket:{reload:1750,velocity:-350,scale:.3,damage:25},missile:{reload:2e3,velocity:-475,scale:.375,damage:40},missile_2:{reload:2500,velocity:-800,scale:.4,damage:60}},reward:{missile_2:750,strategic_jet:500,jet:375,helicopter:275,missile:150,rocket:100},levels:[{index:1,x:485,y:175,enemies:5,enemiesDelay:3e3,velocity:4},{index:2,x:506,y:490,enemies:8,enemiesDelay:2500,velocity:4},{index:3,x:758,y:179,enemies:11,enemiesDelay:2200,velocity:4},{index:4,x:430,y:135,enemies:15,enemiesDelay:1900,velocity:4},{index:5,x:890,y:397,enemies:21,enemiesDelay:1700,velocity:4},{index:6,x:353,y:287,enemies:28,enemiesDelay:1550,velocity:4},{index:7,x:435,y:195,enemies:39,enemiesDelay:1400,velocity:4},{index:8,x:105,y:248,enemies:50,enemiesDelay:1300,velocity:4},{index:9,x:720,y:311,enemies:65,enemiesDelay:1200,velocity:4},{index:10,x:732,y:509,enemies:82,enemiesDelay:1100,velocity:4},{index:11,x:874,y:333,enemies:100,enemiesDelay:1050,velocity:4},{index:12,x:735,y:366,enemies:120,enemiesDelay:1e3,velocity:4},{index:13,x:665,y:435,enemies:145,enemiesDelay:975,velocity:4},{index:14,x:956,y:261,enemies:200,enemiesDelay:950,velocity:4},{index:15,x:676,y:640,enemies:250,enemiesDelay:925,velocity:4}],unlim:{unlim:!0,index:15,enemies:9999,enemiesDelay:1500}},hn=(new n.Game(ln),{left:0,right:0,top:0,bottom:0,width:0,height:0});function fn(){var t=document.body.clientWidth/document.body.clientHeight,e=16/9;if(t===e)hn.left=0,hn.right=ln.width,hn.top=0,hn.bottom=ln.height;else if(t<e){var r=ln.height*t;hn.left=.5*(ln.width-r),hn.right=hn.left+r,hn.top=0,hn.bottom=ln.height}else{var n=ln.width/t;hn.left=0,hn.right=ln.width,hn.top=.5*(ln.height-n),hn.bottom=hn.top+n}hn.width=hn.right-hn.left,hn.height=hn.bottom-hn.top}function pn(t){switch(t){case"health":return ln.player.maxHealth+=ln.player.maxHealth*g,ln.player.maxHealth;case"reload":return ln.weapons.fire[t]-=ln.weapons.fire[t]*g,ln.weapons.fire[t];case"scale":return ln.weapons.fire[t]+=ln.weapons.fire[t]*g,ln.weapons.fire[t]*v;case"velocity":return ln.weapons.fire[t]+=ln.weapons.fire[t]*g,ln.weapons.fire[t];default:throw new Error("Unknown ability upgrade")}}function yn(t){ln.lang=t,localStorage.setItem("lang",t)}function dn(t){return t.cache.json.get("texts")[t.name]}function vn(t){return"0x"+((1<<24)+(t.r<<16)+(t.g<<8)+t.b).toString(16).slice(1)}localStorage.getItem("totalScore")&&0!==localStorage.getItem("totalScore")||(sn=Array(ln.levels.length).fill(0),localStorage.setItem("hiScores",sn),localStorage.setItem("totalScore",0),localStorage.setItem("unlimHiScores",0),Object.keys(ln.casualties).forEach((function(t){localStorage.setItem("casualties_".concat(t),0)})),function(){for(var t=Object.keys(ln.currentUpgradableStats),e=0;e<t.length;e++){var r=t[e];localStorage.setItem("playerAbilityLevel_".concat(r),1)}}(),localStorage.setItem("currentLevelPlayer",ln.currentLevelPlayer),localStorage.setItem("currentPlayerWeapon","fire"),localStorage.setItem("money",ln.money)),ln.lang=localStorage.getItem("lang"),function(){for(var t=Object.keys(ln.currentUpgradableStats),e=0;e<t.length;e++)for(var r=t[e],n=localStorage.getItem("playerAbilityLevel_".concat(r)),o=1;o<n;o++)pn(r)}();var gn=function(t,e){var r=null!=t&&t.time?t:t.scene;return new Promise((function(t){r.time.delayedCall(e,t)}))};function mn(){return ln.fonts[ln.lang]}}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var i=r[t]={exports:{}};return e[t].call(i.exports,i,i.exports,n),i.exports}n.m=e,t=[],n.O=(e,r,o,i)=>{if(!r){var a=1/0;for(l=0;l<t.length;l++){for(var[r,o,i]=t[l],c=!0,s=0;s<r.length;s++)(!1&i||a>=i)&&Object.keys(n.O).every((t=>n.O[t](r[s])))?r.splice(s--,1):(c=!1,i<a&&(a=i));if(c){t.splice(l--,1);var u=o();void 0!==u&&(e=u)}}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[r,o,i]},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};n.O.j=e=>0===t[e];var e=(e,r)=>{var o,i,[a,c,s]=r,u=0;if(a.some((e=>0!==t[e]))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(s)var l=s(n)}for(e&&e(r);u<a.length;u++)i=a[u],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(l)},r=self.webpackChunkinvaiders_must_die=self.webpackChunkinvaiders_must_die||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var o=n.O(void 0,[426],(()=>n(843)));o=n.O(o)})();