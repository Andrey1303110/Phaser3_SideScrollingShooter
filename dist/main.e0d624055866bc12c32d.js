(()=>{"use strict";var e,t={47:(e,t,i)=>{i.d(t,{vc:()=>ct,vq:()=>ft,nD:()=>lt,nU:()=>ut,V1:()=>ht});var n=i(260);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===r(o)?o:String(o)),n)}var o}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,Phaser.Scene);var t,i,n,r,l=(n=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(n);if(r){var i=c(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return a(this,e)});function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),l.call(this,"Boot")}return t=u,(i=[{key:"init",value:function(){ut()}},{key:"preload",value:function(){this.load.image("bg","./assets/sprites/bg.png"),this.load.image("pervious_logo","./assets/sprites/pervious_logo.png")}},{key:"create",value:function(){var e=this;this.createBG(),this.pervious_logo=this.add.sprite(ct.width/2,ct.height/2,"pervious_logo").setAlpha(0);var t=this.cameras.main.width/this.pervious_logo.width,i=this.cameras.main.height/this.pervious_logo.height,n=Math.max(t,i);this.pervious_logo.setScale(n).setScrollFactor(0),this.tweens.add({delay:250,targets:this.pervious_logo,alpha:1,ease:"Linear",duration:1750,yoyo:!0,onComplete:function(){e.scene.start("Preload")}})}},{key:"createBG",value:function(){this.sceneBG=this.add.sprite(ct.width/2,ct.height/2,"bg").setAlpha(.925).setOrigin(.5).setInteractive();var e=this.cameras.main.width/this.sceneBG.width,t=this.cameras.main.height/this.sceneBG.height,i=Math.max(e,t);this.sceneBG.setScale(i).setScrollFactor(0)}}])&&o(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),u}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==u(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===u(r)?r:String(r)),n)}var r}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(s,Phaser.GameObjects.Sprite);var t,i,n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(r){var i=y(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return p(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e.scene,e.x,e.y,e.texture,e.frame)).init(e),t}return t=s,(i=[{key:"init",value:function(e){this.scene.add.existing(this),this.scene.physics.add.existing(this),this.body.enable=!0,this.velocity=e.velocity,this.reward=e.reward,this.move(),this.scene.events.on("update",this.update,this)}},{key:"reset",value:function(e,t){this.x=e,this.y=t,this.setAlive(!0)}},{key:"update",value:function(){this.active&&this.isDead()&&this.setAlive(!1)}},{key:"setAlive",value:function(e){this.body.enable=e,this.setVisible(e),this.setActive(e),this.timer&&(this.timer.paused=!e),e||(this.emit("killed"),this.launch_sound&&(this.launch_sound.stop(),this.launch_sound.stop()&&this.launch_sound.destroy()))}},{key:"isDead",value:function(){return!1}},{key:"move",value:function(){this.body.setVelocityX(this.velocity)}}])&&h(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==v(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===v(r)?r:String(r)),n)}var r}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function w(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,i,n,r,o,s=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(r);if(o){var i=O(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return w(this,e)});function a(){return m(this,a),s.apply(this,arguments)}return t=a,n=[{key:"generate",value:function(e,t){return new a({scene:e,x:t.x+t.displayWidth/2*t.weapon.origin.x,y:t.y,texture:t.weapon.texture,velocity:t.weapon.velocity,scale:t.weapon.scale,reward:ct.reward[t.weapon.texture]})}}],(i=[{key:"createSound",value:function(e){this.launch_sound=e.scene.sound.add("".concat(e.weapon.texture,"_launch")),this.launch_sound.play({volume:.35})}},{key:"move",value:function(){var e=this;"missile"===this.texture.key||"missile_2"===this.texture.key?(this.body.setVelocityY(250),this.body.setVelocityX(this.velocity/10),setTimeout((function(){e.body.setVelocityY(e.velocity/50),e.body.setVelocityX(e.velocity)}),175)):this.body.setVelocityX(this.velocity)}},{key:"reset",value:function(){return!1}},{key:"isDead",value:function(){return this.x>ct.width+this.displayWidth||this.x<-this.displayWidth}}])&&b(t.prototype,i),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function _(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==x(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===x(r)?r:String(r)),n)}var r}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function k(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(s,Phaser.Physics.Arcade.Group);var t,i,n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(n);if(r){var i=j(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return k(this,e)});function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,e.physics.world,e)}return t=s,(i=[{key:"createFire",value:function(e){if(e.active){var t=S.generate(this.scene,e);t.setScale(e.weapon.scale),this.add(t),t.move(),this.createdCount++,t.createSound(e)}}}])&&_(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}();function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function R(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==E(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===E(r)?r:String(r)),n)}var r}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=T(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}},A.apply(this,arguments)}function T(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function D(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(s,e);var t,i,n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(n);if(r){var i=W(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return D(this,e)});function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,{scene:e.scene,x:lt.left,y:ct.height/2,texture:"dragon",frame:"dragon1",velocity:ct.Player.velocity,weapon:{texture:"fire",delay:ct.Weapons.fire.reload,velocity:ct.Weapons.fire.velocity,scale:ct.Weapons.fire.scale,origin:{x:1,y:.5}}})).x+=t.width;var i=t.scene.anims.generateFrameNames("dragon",{prefix:"dragon",start:1,end:6});return t.scene.anims.create({key:"fly",frames:i,frameRate:8,repeat:-1}),t.play("fly"),t}return t=s,(i=[{key:"init",value:function(e){A(W(s.prototype),"init",this).call(this,e),this.scene.add.existing(this),this.scene.physics.add.existing(this),this.body.enable=!0,this.fires=new B(this.scene),this.scene.events.on("update",this.updateFrame,this),this.last_frame="dragon1",this.tween_fly=null,this.weapon=e.weapon}},{key:"updateFrame",value:function(){var e=this;if(this.active){if(this.frame.name!==this.last_frame){var t=this.y;"dragon6"===this.frame.name?"GameScene"!==this.scene.constructor.name&&(this.tween_fly=this.scene.tweens.add({targets:this,y:t+this.displayHeight/3,ease:"Linear",duration:350,onComplete:function(){e.tween_fly=null}})):"dragon3"===this.frame.name&&("GameScene"!==this.scene.constructor.name&&(this.tween_fly=this.scene.tweens.add({targets:this,y:t-this.displayHeight/3,ease:"Linear",duration:350,onComplete:function(){e.tween_fly=null}})),this.scene.sounds.wings.play({volume:.1}))}this.last_frame=this.frame.name}}},{key:"shooting",value:function(){var e=this;!this.scene.cursors.space.isDown&&!this.scene.fireButton.active||this.fires_activate||(this.scene.fireButton.setAlpha(.95),this.fires.createFire(this),this.fires_activate=!0,this.fireTimer=this.scene.time.addEvent({delay:this.weapon.delay,callback:function(){e.fires_activate=!1,e.scene.fireButton.setAlpha(.65)},callbackScope:this}))}},{key:"move",value:function(){return this.body.setVelocity(0),this.y<lt.top+this.displayHeight/1.5?lt.top+this.displayHeight/1.5:this.y>lt.bottom-this.displayHeight/1.5?lt.bottom-this.displayHeight/1.5:this.x<lt.left+this.displayWidth/1.5?lt.left+this.displayWidth/1.5:this.x>lt.right-this.displayWidth/1.5?lt.right-this.displayWidth/1.5:void this.handling()}},{key:"handling",value:function(){var e,t=100,i=!1;for(var n in this.scene.cursorKeys)this.scene.cursorKeys[n].isDown&&(i=!0,(t=Math.floor(100*this.scene.joyStick.force)/100)>100&&(t=100));(e=i?this.scene.cursorKeys:this.scene.cursors)&&(e.left.isDown?this.body.setVelocityX(-this.velocity*(t/100)):e.right.isDown&&this.body.setVelocityX(this.velocity*(t/100)),(e.up.isDown||e.down.isDown)&&(this.tween_fly&&(this.tween_fly.paused=!0),e.up.isDown?this.body.setVelocityY(-this.velocity*(t/100)):e.down.isDown&&this.body.setVelocityY(this.velocity*(t/100))))}}])&&R(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(d);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==G(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===G(r)?r:String(r)),n)}var r}function M(){return M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=H(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}},M.apply(this,arguments)}function H(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function N(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(a,e);var t,i,n,r,o,s=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=U(r);if(o){var i=U(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return N(this,e)});function a(){return C(this,a),s.apply(this,arguments)}return t=a,n=[{key:"generateAttr",value:function(e){var t=lt.right+.25*ct.width,i=Phaser.Math.Between(lt.top+e.maxEnemyFrameHeight/2,lt.bottom-e.maxEnemyFrameHeight/2),n=0;e.info.level>4&&(n=1,e.info.level>8&&(n=2));var r=Object.keys(ct.Enemies)[Phaser.Math.Between(0,n)];return{x:t,y:i,enemy_frame:"enemy".concat(Phaser.Math.Between(1,4)),enemy_type:r}}},{key:"generate",value:function(e,t){var i=a.generateAttr(e);return new a({scene:e,fires:t,x:i.x,y:i.y,enemy_type:i.enemy_type,texture:i.enemy_type,frame:i.enemy_frame,velocity:-1*ct.Enemies[i.enemy_type].velocity})}}],(i=[{key:"init",value:function(e){M(U(a.prototype),"init",this).call(this,e),this.enemy_type=e.enemy_type,this.fires_activate=!0,this.setWeapon(),this.reward=ct.reward[e.texture],this.fires=e.fires,this.timer=this.scene.time.addEvent({delay:ct.Weapons[this.weapon.texture].reload*(.01*Phaser.Math.Between(75,125)),loop:!0,callback:this.shooting,callbackScope:this})}},{key:"setWeapon",value:function(){this.weapon={texture:ct.Enemies[this.enemy_type].weapon,delay:ct.Weapons[ct.Enemies[this.enemy_type].weapon].reload,velocity:ct.Weapons[ct.Enemies[this.enemy_type].weapon].velocity,scale:ct.Weapons[ct.Enemies[this.enemy_type].weapon].scale,origin:{x:-1,y:.5}}}},{key:"stopTimer",value:function(){this.fires_activate=!1}},{key:"shooting",value:function(){this.fires_activate&&this.fires.createFire(this)}},{key:"reset",value:function(){var e=a.generateAttr(this.scene);M(U(a.prototype),"reset",this).call(this,e.x,e.y),this.setWeapon(),this.setFrame(e.frame)}},{key:"isDead",value:function(){return this.x<-this.displayWidth}}])&&F(t.prototype,i),n&&F(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function X(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==q(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===q(r)?r:String(r)),n)}var r}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function z(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Z(e)}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(s,Phaser.Physics.Arcade.Group);var t,i,n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Z(n);if(r){var i=Z(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return z(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e.physics.world,e)).scene=e,t.fires=new B(t.scene),t.countMax=t.scene.info.enemies,t.killed=0,t.createdCount=0,t.timer=t.scene.time.addEvent({delay:t.scene.info.enemiesDelay,loop:!0,callback:t.tick,callbackScope:J(t)}),t}return t=s,(i=[{key:"tick",value:function(){this.scene.time.addEvent({delay:this.scene.info.enemiesDelay*(.01*Phaser.Math.Between(50,150)),callback:this.createEnemy,callbackScope:this})}},{key:"stopTimer",value:function(){this.timer.remove()}},{key:"createEnemy",value:function(){if(this.countMax>this.createdCount){var e=K.generate(this.scene,this.fires);e.on("killed",this.onEnemyKilled,this),this.add(e),e.move(),this.createdCount++}else this.timer.remove()}},{key:"onEnemyKilled",value:function(){this.killed++,this.killed>=this.countMax&&this.scene.events.emit("enemies-killed")}}])&&X(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}();function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function ee(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==$(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===$(r)?r:String(r)),n)}var r}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function ie(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ne(e)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}var oe="explosion",se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(a,Phaser.GameObjects.Sprite);var t,i,n,r,o,s=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=re(r);if(o){var i=re(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return ie(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e.scene,e.x,e.y)).scene.add.existing(ne(t)),t.scene.physics.add.existing(ne(t)),t.body.enable=!0,t.createAnimation(),t.play(oe),t.once(Phaser.Animations.Events.ANIMATION_COMPLETE,(function(){t.destroy()})),t}return t=a,n=[{key:"generate",value:function(e,t,i){return new a({scene:e,x:t,y:i})}}],(i=[{key:"createAnimation",value:function(){if(!this.scene.anims.anims.entries.explosion){var e=this.scene.anims.generateFrameNames("boom",{prefix:"boom",start:1,end:7});this.scene.anims.create({key:oe,frames:e,frameRate:8,repeat:0})}}}])&&ee(t.prototype,i),n&&ee(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ce(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==ae(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===ae(r)?r:String(r)),n)}var r}function le(e,t){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},le(e,t)}function ue(e,t){if(t&&("object"===ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}var fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&le(e,t)}(s,Phaser.Scene);var t,i,n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=he(n);if(r){var i=he(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return ue(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,"Game")}return t=s,(i=[{key:"init",value:function(e){"0"!==localStorage.getItem("firstTimePlay")&&localStorage.setItem("firstTimePlay","0"),this.info=e,this.currentLevelScene=this.info.level,this.currentScore=0,this.black_bg=null}},{key:"create",value:function(e){var t;this.createBG(e),this.getMaxEnemyHeightFrame(),this.cursors=this.input.keyboard.createCursorKeys(),this.createPlayer(),this.createEnemies(),this.createCompleteEvents(),this.addOverlap(),this.createScoreText(),this.createSounds(),this.addPauseButton(),this.addJoystick(),this.addFireButton(),null!==(t=this.info)&&void 0!==t&&t.unlim||this.addProgressBar()}},{key:"addJoystick",value:function(){var e=document.body.clientWidth>1280?0:1;this.joyStick=this.plugins.get("rexvirtualjoystickplugin").add(this,{x:lt.left+ct.joystick.radius+ct.joystick.gap,y:lt.bottom-ct.joystick.radius-ct.joystick.gap,radius:ct.joystick.radius,base:this.add.circle(0,0,ct.joystick.radius).setStrokeStyle(3.5,1729964).setAlpha(.75*e),thumb:this.add.circle(0,0,ct.joystick.radius/2,13421772).setAlpha(.5*e),dir:"8dir"})}},{key:"dumpJoyStickState",value:function(){this.joyStick&&(this.cursorKeys=this.joyStick.createCursorKeys())}},{key:"addFireButton",value:function(){var e=this,t=document.body.clientWidth>1280?0:1;this.fireButton=this.add.sprite(lt.right-ct.joystick.radius-ct.joystick.gap,this.joyStick.y,"fire").setAlpha(.65*t).setInteractive().setActive(!1).on("pointerup",(function(){e.fireButton.active=!1}),this).on("pointerdown",(function(){e.fireButton.active=!0,e.player.shooting()}),this)}},{key:"update",value:function(){this.sceneBG.tilePositionX+=this.sceneBG.width/1e4*this.speed,this.dumpJoyStickState(),this.player.move(),this.player.shooting()}},{key:"createBG",value:function(e){var t=null!=e&&e.unlim?"bg".concat(Phaser.Math.Between(1,ct.Levels.length)):"bg".concat(e.level),i=this.textures.list[t].source[0].height,n=ct.height/i;this.speed=.048*ct.Levels[this.currentLevelScene-1].velocity,1!==n&&(this.speed/=n),this.sceneBG=this.add.tileSprite(0,0,ct.width,ct.height,t).setOrigin(0).setScale(n).setAlpha(.65)}},{key:"createScoreText",value:function(){var e;this.hiScoreText&&this.hiScoreText.destroy(),this.scoreText=this.add.text(lt.right-.01*ct.width,lt.top+.01*ct.width,this.currentScore,{font:"".concat(.03*ct.width,"px DishOut"),fill:"#EA0000"}).setOrigin(1,0).setAlpha(.75),null!==(e=this.info)&&void 0!==e&&e.unlim&&(this.hiScoreText=this.add.text(ct.width/2,lt.top+.01*ct.width,"High score: "+localStorage.getItem("unlimHiScores"),{font:"".concat(.03*ct.width,"px DishOut"),fill:"#EA0000"}).setOrigin(.5,0).setAlpha(.75))}},{key:"createPlayer",value:function(){this.player=new I({scene:this})}},{key:"createEnemies",value:function(){this.enemies=new Q(this)}},{key:"createSounds",value:function(){this.sounds||(this.sounds={rocket_launch:this.sound.add("rocket_launch"),fire_launch:this.sound.add("fire_launch"),missile_launch:this.sound.add("missile_launch"),explosion_small:this.sound.add("explosion_small"),wings:this.sound.add("wings"),died:this.sound.add("died"),win:this.sound.add("win"),level_up:this.sound.add("level_up")})}},{key:"addOverlap",value:function(){this.physics.add.overlap(this.player.fires,this.enemies,this.onOverlap,void 0,this),this.physics.add.overlap(this.enemies.fires,this.player,this.onOverlap,void 0,this),this.physics.add.overlap(this.player.fires,this.enemies.fires,this.onOverlap,void 0,this),this.physics.add.overlap(this.player,this.enemies,this.onOverlap,void 0,this)}},{key:"onOverlap",value:function(e,t){if(!(t.x>ct.width+t.displayWidth/2)){if(e!==this.player&&t!==this.player){var i,n;if(null===(i=this.info)||void 0===i||!i.unlim){var r=t.texture.key;"strategic_jet"===t.texture.key?r="jet":"missile_2"===t.texture.key&&(r="missile");var o=Number(localStorage.getItem("losses_".concat(r)));localStorage.setItem("losses_".concat(r),++o)}var s=Number((t.reward*Math.pow(ct.level.scoreCof,this.currentLevelScene-1)).toFixed(0));if(this.currentScore+=s,null===(n=this.info)||void 0===n||!n.unlim){var a=Number(ct.totalScore);localStorage.setItem("totalScore",a+s),ct.totalScore=a+s}this.scoreText.text=this.currentScore,this.updateProgressBar()}se.generate(this,t.x,t.y),e.setAlive(!1),t.setAlive(!1),this.sounds.explosion_small.play()}}},{key:"createCompleteEvents",value:function(){this.player.emit("killed"),this.player.once("killed",this.onComplete,this),this.events.once("enemies-killed",this.onComplete,this)}},{key:"onComplete",value:function(){var e=this;if(!this.black_bg){this.black_bg=this.add.rectangle(ct.width/2,ct.height/2,ct.width,ct.height,"0x000000",0).setInteractive().setDepth(9999999);var t=this.add.text(this.black_bg.x,this.black_bg.y,"",{font:"".concat(.03*ct.width,"px DishOut"),fill:"#EA0000"}).setOrigin(.5).setAlpha(0).setDepth(this.black_bg.depth);if(this.game.sound.stopAll(),this.player.active){if(this.sounds.win.play(),t.text="GLORY TO UKRAINE!",this.info.hiScore<this.currentScore){var i=localStorage.getItem("hiScores").split(",");i[this.currentLevelScene-1]=this.currentScore,localStorage.setItem("hiScores",i.join())}ct.currentLevelScene<=this.currentLevelScene&&(ct.currentLevelScene++,localStorage.setItem("currentLevelScene",ct.currentLevelScene))}else t.text="HEROES DON'T DIE!",this.sounds.died.play(),this.info.unlim&&localStorage.getItem("unlimHiScores")<this.currentScore&&localStorage.setItem("unlimHiScores",this.currentScore);this.tweens.add({targets:[this.black_bg,t],fillAlpha:1,alpha:1,scale:2*t.scale,ease:"Linear",duration:1e3*this.sounds.died.duration*.75,onComplete:function(){e.info.unlim?e.scene.start("Levels"):e.scene.start("Map"),e.scene.stop()}}),this.enemies.stopTimer(),this.enemies.children.entries.forEach((function(e){e.stopTimer()}))}}},{key:"addPauseButton",value:function(){var e=this;this.add.sprite(lt.left+.015*ct.width,lt.top+.015*ct.width,"pause").setAlpha(.65).setInteractive().on("pointerdown",(function(){e.scene.launch("Pause"),e.scene.pause()}),this)}},{key:"addProgressBar",value:function(){this.progressBar=this.add.sprite(ct.width/2,lt.top+.0225*ct.width,"progressBar").setAlpha(.95),this.progressBar.fillProgress=this.add.sprite(this.progressBar.x+.1*this.progressBar.displayWidth,this.progressBar.y+.04*this.progressBar.displayHeight,"progressBarFill").setAlpha(.95),this.progressBar.levelText=this.add.text(this.progressBar.x-.38*this.progressBar.displayWidth,this.progressBar.y-.035*this.progressBar.displayHeight,ct.currentLevelPlayer,{font:"".concat(.545*this.progressBar.displayHeight,"px DishOut"),fill:"#FFFFFF"}).setOrigin(.5).setAlpha(.75),this.updateProgressBar()}},{key:"updateProgressBar",value:function(){var e;if(null===(e=this.info)||void 0===e||!e.unlim){var t={start:this.getRequiredScoreOnLevel(ct.currentLevelPlayer-1),end:this.getRequiredScoreOnLevel(ct.currentLevelPlayer),diff:this.getRequiredScoreOnLevel(ct.currentLevelPlayer)-this.getRequiredScoreOnLevel(ct.currentLevelPlayer-1)},i=(ct.totalScore-t.start)/t.diff;ct.currentLevelPlayer<2&&(i=ct.totalScore/t.diff),i>=1&&(this.increaseLevel(),t={start:this.getRequiredScoreOnLevel(ct.currentLevelPlayer-1),end:this.getRequiredScoreOnLevel(ct.currentLevelPlayer),diff:this.getRequiredScoreOnLevel(ct.currentLevelPlayer)-this.getRequiredScoreOnLevel(ct.currentLevelPlayer-1)},i=1- -1*(ct.totalScore-t.end)/t.diff),this.progressBar.fillProgress.frame.cutWidth=this.progressBar.fillProgress.displayWidth*i,this.progressBar.fillProgress.frame.updateUVs(),this.progressBar.text=ct.currentLevelPlayer}}},{key:"increaseLevel",value:function(){var e=this;this.sounds.level_up.play({volume:.5}),ct.currentLevelPlayer++,localStorage.setItem("currentLevelPlayer",ct.currentLevelPlayer);var t=this.add.text(ct.width/2,ct.height/2,ct.currentLevelPlayer,{font:"".concat(.25*ct.width,"px DishOut"),fill:"#FFFFFF"}).setOrigin(.5).setAlpha(0);this.tweens.add({targets:t,alpha:1,x:this.progressBar.levelText.x,y:this.progressBar.levelText.y,scale:this.progressBar.levelText.displayWidth/t.displayWidth,ease:"Linear",duration:500,onComplete:function(){t.destroy(),e.progressBar.levelText.text=ct.currentLevelPlayer}}),this.increaseMoney()}},{key:"getRequiredScoreOnLevel",value:function(e){for(var t=0,i=0;i<e;i++)t+=Number((ct.level.score*Math.pow(ct.level.levelCof,i)).toFixed(0));return t}},{key:"increaseMoney",value:function(){++ct.money,localStorage.setItem("money",ct.money)}},{key:"getMaxEnemyHeightFrame",value:function(){var e=0,t=this.textures.list.helicopter.frames;Object.keys(t).forEach((function(i){t[i].cutHeight>e&&(e=t[i].height)})),this.maxEnemyFrameHeight=e}}])&&ce(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}();function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function ye(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==pe(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===pe(r)?r:String(r)),n)}var r}function de(e,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},de(e,t)}function ve(e,t){if(t&&("object"===pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function me(e){return me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},me(e)}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(s,Phaser.Scene);var t,i,n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=me(n);if(r){var i=me(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return ve(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,"Levels")}return t=s,(i=[{key:"init",value:function(){this.buttons=[],this.buttons_num=0}},{key:"create",value:function(){this.createBG(),this.createButton("campaign",.275),this.createButton("unlim",.5),this.createButton("upgrade",.725)}},{key:"createBG",value:function(){this.sceneBG=this.add.sprite(ct.width/2,ct.height/2,"bg").setAlpha(.925).setOrigin(.5).setInteractive();var e=this.cameras.main.width/this.sceneBG.width,t=this.cameras.main.height/this.sceneBG.height,i=Math.max(e,t);this.sceneBG.setScale(i).setScrollFactor(0)}},{key:"createButton",value:function(e,t){var i=this;this.buttons[e]=this.add.sprite(ct.width/2,ct.height*t,"button_"+e).setScale(5).setAlpha(0).setOrigin(.5).setInteractive().on("pointerdown",this.gameSelect),this.buttons[e].name=e,this.buttons_num++;var n=e.toUpperCase(),r={font:"".concat(.03*ct.width,"px DishOut"),fill:"#f0f0f0"};this.buttons[e].buttonText=this.add.text(this.buttons[e].x,this.buttons[e].y,n,r).setScale(3).setOrigin(.5).setAlpha(0),this.buttons[e].on("pointerover",(function(){i.buttons[e].setAlpha(1)})),this.buttons[e].on("pointerout",(function(){i.buttons[e].setAlpha(.75)})),this.tweens.add({targets:this.buttons[e],delay:250*this.buttons_num,alpha:.675,scale:.65,ease:"Linear",duration:333}),this.tweens.add({targets:this.buttons[e].buttonText,delay:250*this.buttons_num,alpha:.9,scale:1,ease:"Linear",duration:333})}},{key:"gameSelect",value:function(){switch(this.name){case"campaign":this.scene.scene.start("Map");break;case"unlim":this.scene.scene.start("Game",ct.unlim);break;case"upgrade":this.scene.scene.start("Upgrade")}}}])&&ye(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}();function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function we(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==ge(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===ge(r)?r:String(r)),n)}var r}function Oe(e,t){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oe(e,t)}function Se(e,t){if(t&&("object"===ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xe(e)}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oe(e,t)}(s,Phaser.Scene);var t,i,n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xe(n);if(r){var i=xe(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Se(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,"Map")}return t=s,(i=[{key:"init",value:function(){this.mapDots=[]}},{key:"create",value:function(){this.createSounds(),this.createBG(),this.createMap(),this.createMissions(),this.createLosses(),this.addReturnButton(),this.addAvailableMoney()}},{key:"createBG",value:function(){this.sceneBG=this.add.sprite(ct.width/2,ct.height/2,"bg").setAlpha(.925).setOrigin(.5).setInteractive();var e=this.cameras.main.width/this.sceneBG.width,t=this.cameras.main.height/this.sceneBG.height,i=Math.max(e,t);this.sceneBG.setScale(i).setScrollFactor(0)}},{key:"createMap",value:function(){this.map=this.add.sprite(ct.width/2,ct.height/2,"map").setAlpha(.65).setOrigin(.5).setScale(1.25)}},{key:"createMissions",value:function(){var e=this;ct.Levels.forEach((function(t){e.createDot(t)}))}},{key:"createDot",value:function(e){var t=this,i=(ct.width-this.map.displayWidth)/2+e.x/1e3*this.map.displayWidth,n=(ct.height-this.map.displayHeight)/2+e.y/1e3*this.map.displayWidth,r=this.add.sprite(i,n,"battle").setOrigin(.5).setInteractive().on("pointerdown",this.selectLevel);r.info=e,e.level>ct.currentLevelScene?(r.setAlpha(.6).setScale(2/3).on("pointerdown",(function(){t.sounds.error.play({volume:.33})})),r.active=!1):(r.setAlpha(1).on("pointerdown",(function(){t.sounds.select.play({volume:.33})})),r.active=!0,ct.currentLevelScene>e.level?r.setTexture("flag").setOrigin(0,1):this.addDotAnim(r)),this.mapDots.push(r)}},{key:"addDotAnim",value:function(e){this.tweens.add({targets:e,scale:1.5*e.scale,duration:425,yoyo:!0,repeat:-1})}},{key:"selectLevel",value:function(){this.active&&this.scene.createLevelCard(this.info)}},{key:"createLevelCard",value:function(e){var t=this,i=this.add.rectangle(ct.width/2,ct.height/2,ct.width,ct.height,"0x000000",0).setInteractive(),n=localStorage.getItem("hiScores").split(",")[e.level-1];e.hiScore=n;var r=this.add.sprite(ct.width/2,ct.height/2,"frame");r.displayHeight=.795*ct.height;var o=[];o.push(this.add.text(r.x,r.y-r.displayHeight/2+.086*r.displayHeight,"MISSION",{font:"".concat(.13*r.displayWidth,"px DishOut"),fill:"#0a0a0a"}).setOrigin(.5).setAlpha(.55)),o.push(this.add.text(r.x,r.y-r.displayHeight/2+.25*r.displayHeight,"Level ".concat(e.level),{font:"".concat(.0925*r.displayWidth,"px DishOut"),fill:"#0a0a0a"}).setOrigin(.5).setAlpha(.8)),o.push(this.add.text(r.x,r.y-r.displayHeight/2+.37*r.displayHeight,"City",{font:"".concat(.055*r.displayWidth,"px DishOut"),fill:"#0a0a0a"}).setOrigin(.5).setAlpha(.8)),o.push(this.add.text(r.x,r.y-r.displayHeight/2+.44*r.displayHeight,e.name,{font:"".concat(.06175*r.displayWidth,"px DishOut"),fill:"#0a0a0a"}).setOrigin(.5).setAlpha(.8)),n>0&&o.push(this.add.text(r.x,r.y-r.displayHeight/2+.58*r.displayHeight,"Hi score: ".concat(n),{font:"".concat(.049*r.displayWidth,"px DishOut"),fill:"#E2B80D"}).setOrigin(.5).setAlpha(.8)),o.push(this.add.text(r.x,r.y-r.displayHeight/2+.71*r.displayHeight,"Enemies - ".concat(e.enemies),{font:"".concat(.051*r.displayWidth,"px DishOut"),fill:"#EA0000"}).setOrigin(.5).setAlpha(.8)),this.sounds.stamp.play();var s=this.add.sprite(r.x,r.y,"stamp").setAlpha(0).setAngle(31).setScale(2.5),a=r.x+r.displayWidth/2-r.displayWidth*Phaser.Math.Between(25,35)/100,c=r.y+r.displayWidth/2-r.displayHeight*Phaser.Math.Between(26,30)/100;this.add.timeline([{tween:{targets:s,scale:.26,x:a,y:c,alpha:.85,ease:"Power3",duration:365}},{at:365,tween:{targets:s,scale:.305,alpha:.55,ease:"Power2",duration:273.75}},{at:638.75,run:function(){var n=t.add.text(r.x,r.y+r.displayHeight/2-.09*r.displayHeight,"START",{font:"".concat(.105*r.displayWidth,"px DishOut"),fill:"#51E04A"}).setOrigin(.5).setAlpha(.7).setInteractive().on("pointerdown",(function(){t.gameStart(e)})).on("pointerover",(function(){n.setAlpha(.9)})).on("pointerout",(function(){n.setAlpha(.7)}));o.push(n);var a=t.add.sprite(r.x+r.displayWidth/2,r.y-r.displayHeight/2,"close").setOrigin(1.3,-.35).setAlpha(.7).setInteractive().on("pointerdown",(function(){t.cardClose({bg_rect:i,frame:r,texts:o,stamp:s,close_button:a})})).on("pointerover",(function(){a.setAlpha(.9)})).on("pointerout",(function(){a.setAlpha(.7)}))}}]).play()}},{key:"cardClose",value:function(e){e.bg_rect.destroy(),e.frame.destroy(),e.stamp.destroy(),e.close_button.destroy(),e.texts.forEach((function(e){e.destroy()}))}},{key:"gameStart",value:function(e){var t=this;this.sounds.ready.play();var i=this.add.rectangle(ct.width/2,ct.height/2,ct.width,ct.height,"0x000000",0).setInteractive();this.tweens.add({targets:i,fillAlpha:1,ease:"Linear",duration:1e3*this.sounds.ready.duration*.7,onComplete:function(){t.scene.start("Game",e)}})}},{key:"createLosses",value:function(){var e=this;this.losses_text&&this.losses_text.forEach((function(e){e.destroy()}));var t={x:lt.left+.033*ct.width,y:.635*ct.height};this.losses_text=[],this.losses_text.push(this.add.text(t.x,t.y,"Total russian losses:",{font:"".concat(.025*ct.width,"px DishOut"),fill:"#EA0000"}).setOrigin(0,.5).setAlpha(.75)),Object.keys(ct.Losses).forEach((function(i){t.y+=.0285*ct.width,e.losses_text.push(e.add.text(t.x,t.y,"".concat(i,"s: ").concat(localStorage.getItem("losses_".concat(i))),{font:"".concat(.0215*ct.width,"px DishOut"),fill:"#000000"}).setOrigin(0,.5).setAlpha(.75))}))}},{key:"addReturnButton",value:function(){var e=this;this.add.sprite(lt.left+.015*ct.width,lt.top+.015*ct.width,"return").setAlpha(.65).setInteractive().on("pointerdown",(function(){e.scene.start("Levels")}),this)}},{key:"addAvailableMoney",value:function(){var e=this,t={font:"".concat(.031*ct.width,"px DishOut"),fill:"#FFFFFF"};this.moneyIcon=this.add.sprite(lt.right-.075*ct.height,lt.top+.075*ct.height,"ruby").setScale(.25).setInteractive().on("pointerdown",(function(){e.scene.start("Upgrade")})),this.moneyText=this.add.text(this.moneyIcon.x-this.moneyIcon.displayWidth,this.moneyIcon.y,ct.money,t).setOrigin(.5).setAlpha(1)}},{key:"createSounds",value:function(){this.sounds||(this.sounds={select:this.sound.add("select"),error:this.sound.add("error"),stamp:this.sound.add("stamp"),ready:this.sound.add("ready")})}}])&&we(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}();function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function ke(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==Pe(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==Pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===Pe(r)?r:String(r)),n)}var r}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}function Be(e,t){if(t&&("object"===Pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ee(e)}var Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(s,Phaser.Scene);var t,i,n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ee(n);if(r){var i=Ee(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Be(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,"Pause")}return t=s,(i=[{key:"init",value:function(){this.game.sound.stopAll()}},{key:"create",value:function(){this.createBG(),this.createButtons(),this.toggleMenu()}},{key:"createBG",value:function(){this.black_bg=this.add.rectangle(ct.width/2,ct.height/2,ct.width,ct.height,"0x000000",0),this.sceneBG=this.add.sprite(ct.width/2,-1*ct.height,"pause_bg").setOrigin(.5),this.tweens.add({targets:this.sceneBG,y:ct.height/2,ease:"Linear",duration:750})}},{key:"createButtons",value:function(){var e=this;this.play_button=this.add.sprite(this.sceneBG.x,this.sceneBG.y,"play").setScale(.8).setAlpha(.85).setOrigin(.5).setInteractive().on("pointerdown",(function(){e.toggleMenu("resume")}),this).on("pointerover",(function(){e.play_button.setAlpha(1)})).on("pointerout",(function(){e.play_button.setAlpha(.85)})),this.restart_button=this.add.sprite(this.sceneBG.x+.25*this.sceneBG.displayWidth,this.sceneBG.y,"restart").setScale(1.25).setAlpha(.65).setOrigin(.5).setInteractive().on("pointerdown",(function(){e.toggleMenu("restart")}),this).on("pointerover",(function(){e.restart_button.setAlpha(1)})).on("pointerout",(function(){e.restart_button.setAlpha(.65)})),this.return_button=this.add.sprite(this.sceneBG.x-.25*this.sceneBG.displayWidth,this.sceneBG.y,"return").setScale(1.25).setAlpha(.65).setOrigin(.5).setInteractive().on("pointerdown",(function(){e.toggleMenu("return")}),this).on("pointerover",(function(){e.return_button.setAlpha(1)})).on("pointerout",(function(){e.return_button.setAlpha(.65)}))}},{key:"toggleMenu",value:function(e){var t=this,i=this.sceneBG.y<0?lt.top+this.sceneBG.displayHeight/2:-1*ct.height;this.tweens.add({targets:this.sceneBG,y:i,ease:"Linear",duration:750,onComplete:function(){switch(e){case"resume":t.scene.resume("Game");break;case"restart":t.scene.start("Game");break;case"return":t.scene.stop("Game"),t.scene.launch("Map")}}}),this.tweens.add({targets:[this.play_button,this.restart_button,this.return_button],y:i+.06085*this.sceneBG.displayHeight,ease:"Linear",duration:750})}}])&&ke(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}();function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Te(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==Ae(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===Ae(r)?r:String(r)),n)}var r}function Le(e,t){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Le(e,t)}function De(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}var Ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Le(e,t)}(s,Phaser.Scene);var t,i,n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=We(n);if(r){var i=We(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return De(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,"Upgrade")}return t=s,(i=[{key:"init",value:function(){this.buttons={}}},{key:"create",value:function(){this.createBG(),this.createPlayer(),this.addReturnButton(),this.createSounds(),this.addAvailableMoney()}},{key:"createBG",value:function(){this.sceneBG=this.add.sprite(ct.width/2,ct.height/2,"bg").setAlpha(.925).setOrigin(.5);var e=this.cameras.main.width/this.sceneBG.width,t=this.cameras.main.height/this.sceneBG.height,i=Math.max(e,t);this.sceneBG.setScale(i).setScrollFactor(0)}},{key:"addAvailableMoney",value:function(){var e={font:"".concat(.031*ct.width,"px DishOut"),fill:"#FFFFFF"};this.moneyIcon=this.add.sprite(lt.right-.075*ct.height,lt.top+.075*ct.height,"ruby").setScale(.25),this.moneyText=this.add.text(this.moneyIcon.x-this.moneyIcon.displayWidth,this.moneyIcon.y,ct.money,e).setOrigin(.5).setAlpha(1)}},{key:"createPlayer",value:function(){this.player=new I({scene:this}),this.tweens.add({targets:this.player,x:.125*ct.width,ease:"Linear",duration:1250,onComplete:this.createStats,callbackScope:this})}},{key:"createStats",value:function(){var e=this;this.statsText={},this.statsIcon={},this.statsLevel={};for(var t={font:"".concat(.031*ct.width,"px DishOut"),fill:"#000000"},i=this.add.text(ct.width/2,lt.bottom-.075*ct.height,"Every level increse your ability on +5%",t).setOrigin(.5).setAlpha(0),n=Object.keys(ct.Weapons.fire),r=ct.height/2.5,o=function(o){var s=n[o],a=1;"scale"===s&&(a=100);var c=(Math.round(ct.Weapons.fire[s]*a)/a*a).toFixed(0),l=.57*ct.width,u=ct.height/2-r/2+r/n.length*o,h=localStorage.getItem("playerWeapon_".concat(s)),f="".concat(s.toUpperCase()," (").concat(ct.weapons_units[s],"): ").concat(c),p="Lvl. "+h;e.statsText[s]=e.add.text(l,u,f,t).setOrigin(1,0).setAlpha(0),e.statsIcon[s]=e.add.sprite(l+.06*ct.width,u,s).setOrigin(.5,.15).setAlpha(0).setDisplaySize(.045*ct.width,.045*ct.width),e.statsLevel[s]=e.add.text(l+.12*ct.width,u,p,t).setOrigin(0,0).setAlpha(0),e.tweens.add({targets:[e.statsText[s],e.statsIcon[s],e.statsLevel[s]],delay:275*o,ease:"Linear",alpha:.75,duration:450,onComplete:function(){o>=n.length-1&&e.tweens.add({targets:i,delay:275,ease:"Linear",alpha:.75,duration:450})},callbackScope:e}),e.createUpgredeButton({x:l,y:u,key:s,level:h})},s=0;s<n.length;s++)o(s)}},{key:"checkAvailable",value:function(e){this.checkPrice(e);var t=.9;ct.money<e.cost&&(e.active=!1,t=.5),e.setAlpha(t),e.textCost.setAlpha(t),e.crystal.setAlpha(t)}},{key:"checkPrice",value:function(e){e.cost=Math.floor(e.level/10)+1,e.textCost.text=e.cost}},{key:"createUpgredeButton",value:function(e){this.buttons[e.key]=this.add.sprite(e.x+.3*ct.width,e.y,"button_campaign").setOrigin(.5,.125).setScale(.33).setInteractive().on("pointerdown",this.upgarde),this.buttons[e.key].name=e.key,this.buttons[e.key].level=e.level,this.buttons[e.key].cost=Math.floor(this.buttons[e.key].level/10)+1;var t={font:"".concat(.023*ct.width,"px DishOut"),fill:"#FFFFFF"};this.buttons[e.key].textCost=this.add.text(this.buttons[e.key].x,this.buttons[e.key].y,"1",t).setOrigin(.5,-.125),this.buttons[e.key].crystal=this.add.sprite(this.buttons[e.key].x,this.buttons[e.key].y,"ruby").setOrigin(.5,.05).setScale(.15),this.buttons[e.key].textCost.x-=this.buttons[e.key].crystal.displayWidth/2,this.buttons[e.key].crystal.x+=this.buttons[e.key].crystal.displayWidth/2,this.buttons[e.key].clicked=!1,this.checkAvailable(this.buttons[e.key])}},{key:"decreaseMoney",value:function(e){if(!ct.money)return!1;ct.money-=e,localStorage.setItem("money",ct.money),this.moneyText.text=ct.money}},{key:"upgarde",value:function(){var e=this;if(!this.clicked&&this.active){var t=localStorage.getItem("playerWeapon_".concat(this.name));if(!1!==this.scene.decreaseMoney(this.cost)){localStorage.setItem("playerWeapon_".concat(this.name),++t),this.level=t;var i=ht({init:!1,key:this.name}),n=1;"scale"===this.name&&(n=100),i=(Math.round(ct.Weapons.fire[this.name]*n)/n*n).toFixed(0),this.scene.statsText[this.name].text="".concat(this.name.toUpperCase()," (").concat(ct.weapons_units[this.name],"): ").concat(i),this.scene.statsLevel[this.name].text="Lvl. "+localStorage.getItem("playerWeapon_".concat(this.name)),this.clicked=!0,this.setAlpha(1),this.scene.tweens.add({targets:this,ease:"Linear",alpha:.5,duration:1e3,onComplete:function(){e.clicked=!1;for(var t=0;t<Object.keys(ct.Weapons.fire).length;t++){var i=Object.keys(ct.Weapons.fire)[t];e.scene.checkAvailable(e.scene.buttons[i])}}}),this.scene.createUpgradeAnimation(this.name,t)}}else this.active||this.scene.sounds.error.play({volume:.3})}},{key:"createUpgradeAnimation",value:function(e,t){var i=this;this.sounds.upgrade.play({volume:.2});for(var n=10+t,r=function(){var r={x:i.player.x-.6*i.player.displayWidth+1.2*i.player.displayWidth/n*o,y:Phaser.Math.Between(100*(i.player.y-.5*i.player.displayHeight),100*(i.player.y+.5*i.player.displayHeight))/100,scale:.075*ct.height*(Phaser.Math.Between(25+t,50+t)/100),alpha:Phaser.Math.Between(75,100)/100,duration:Phaser.Math.Between(750,1250)},s=i.add.text(r.x,r.y,"+",{font:"".concat(r.scale,"px DishOut"),fill:"#".concat(ct.upgradeColors[e])}).setOrigin(.5).setAlpha(r.alpha).setStroke("#fafafa33",4);i.tweens.add({targets:s,y:lt.top,alpha:0,ease:"Linear",duration:r.duration,onComplete:function(){s.destroy()}})},o=0;o<n;o++)r()}},{key:"addReturnButton",value:function(){var e=this;this.add.sprite(lt.left+.015*ct.width,lt.top+.015*ct.width,"return").setAlpha(.65).setInteractive().on("pointerdown",(function(){e.scene.start("Levels")}),this)}},{key:"createSounds",value:function(){this.sounds||(this.sounds={wings:this.sound.add("wings"),upgrade:this.sound.add("upgrade"),error:this.sound.add("error")})}}])&&Te(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}();function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Ce(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==Ge(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===Ge(r)?r:String(r)),n)}var r}var Fe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.colors={r:210,g:0,b:25},this.style={boxColor:14934490,x:ct.width/2-.5*ct.width/2,y:ct.height/2+.25*ct.height,width:.5*ct.width,height:.05*ct.height},this.progressBox=this.scene.add.graphics(),this.progressBar=this.scene.add.graphics(),this.showProgressBox(),this.setEvents()}var t,i;return t=e,(i=[{key:"setEvents",value:function(){var e=this;this.scene.load.on("progress",this.showProgressBar,this),this.scene.load.on("complete",(function(){e.scene.scene.start("Levels")}),this)}},{key:"showProgressBox",value:function(){this.progressBox.fillStyle(this.style.boxColor).fillRect(this.style.x,this.style.y,this.style.width,this.style.height)}},{key:"showProgressBar",value:function(e){this.colors.r=210-200*e,this.colors.g=225*e,this.progressBar.clear().fillStyle(ft(this.colors)).fillRect(this.style.x,this.style.y,this.style.width*e,this.style.height)}}])&&Ce(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function He(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==Me(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==Me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===Me(r)?r:String(r)),n)}var r}function Ve(e,t){return Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ve(e,t)}function Ne(e,t){if(t&&("object"===Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}var Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ve(e,t)}(s,Phaser.Scene);var t,i,n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ue(n);if(r){var i=Ue(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Ne(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,"Preload")}return t=s,(i=[{key:"preload",value:function(){this.createBG(),new Fe(this),this.preloadAssets()}},{key:"createBG",value:function(){this.sceneBG=this.add.sprite(ct.width/2,ct.height/2,"bg").setAlpha(.925).setOrigin(.5).setInteractive();var e=this.cameras.main.width/this.sceneBG.width,t=this.cameras.main.height/this.sceneBG.height,i=Math.max(e,t);this.sceneBG.setScale(i).setScrollFactor(0)}},{key:"preloadAtalses",value:function(){this.load.atlas("dragon","./assets/sprites/dragon.png","./assets/sprites/dragon.json"),this.load.atlas("jet","./assets/sprites/jet.png","./assets/sprites/jet.json"),this.load.atlas("strategic_jet","./assets/sprites/strategic_jet.png","./assets/sprites/strategic_jet.json"),this.load.atlas("helicopter","./assets/sprites/helicopter.png","./assets/sprites/helicopter.json"),this.load.atlas("boom","./assets/sprites/boom.png","./assets/sprites/boom.json")}},{key:"preloadImages",value:function(){for(var e=1;e<=ct.Levels.length;e++)this.load.image("bg".concat(e),"./assets/sprites/bg".concat(e,".png"));this.load.image("fire","./assets/sprites/fire.png"),this.load.image("flag","./assets/sprites/flag.png"),this.load.image("rocket","./assets/sprites/rocket.png"),this.load.image("missile","./assets/sprites/missile.png"),this.load.image("missile_2","./assets/sprites/missile_2.png"),this.load.image("button_campaign","./assets/sprites/button_campaign.png"),this.load.image("button_unlim","./assets/sprites/button_unlim.png"),this.load.image("button_upgrade","./assets/sprites/button_upgrade.png"),this.load.image("map","./assets/sprites/map.png"),this.load.image("battle","./assets/sprites/battle.png"),this.load.image("ruby","./assets/sprites/ruby.png"),this.load.image("flag","./assets/sprites/flag.png"),this.load.image("frame","./assets/sprites/frame.png"),this.load.image("stamp","./assets/sprites/stamp.png"),this.load.image("close","./assets/sprites/close.png"),this.load.image("return","./assets/sprites/return.png"),this.load.image("pause","./assets/sprites/pause.png"),this.load.image("pause_bg","./assets/sprites/pause_bg.png"),this.load.image("restart","./assets/sprites/restart.png"),this.load.image("play","./assets/sprites/play.png"),this.load.image("scale","./assets/sprites/scale.png"),this.load.image("reload","./assets/sprites/reload.png"),this.load.image("velocity","./assets/sprites/velocity.png"),this.load.image("progressBar","./assets/sprites/progressBar.png"),this.load.image("progressBarFill","./assets/sprites/progressBarFill.png")}},{key:"preloadAudios",value:function(){this.load.audio("select","./assets/sounds/select.wav"),this.load.audio("error","./assets/sounds/error.mp3"),this.load.audio("rocket_launch","./assets/sounds/rocket_launch.mp3"),this.load.audio("fire_launch","./assets/sounds/fire_launch.mp3"),this.load.audio("missile_launch","./assets/sounds/missile_launch.mp3"),this.load.audio("missile_2_launch","./assets/sounds/missile_2_launch.mp3"),this.load.audio("explosion_small","./assets/sounds/explosion_small.mp3"),this.load.audio("wings","./assets/sounds/wings.mp3"),this.load.audio("stamp","./assets/sounds/stamp.mp3"),this.load.audio("ready","./assets/sounds/ready.mp3"),this.load.audio("died","./assets/sounds/died.mp3"),this.load.audio("win","./assets/sounds/win.mp3"),this.load.audio("upgrade","./assets/sounds/upgrade.mp3"),this.load.audio("level_up","./assets/sounds/level_up.mp3")}},{key:"preloadOther",value:function(){this.load.plugin("rexvirtualjoystickplugin","./assets/plugins/rexvirtualjoystickplugin.min.js",!0)}},{key:"preloadAssets",value:function(){this.preloadAtalses(),this.preloadImages(),this.preloadAudios(),this.preloadOther()}}])&&He(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}();function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function Xe(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==qe(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t);if("object"!==qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===qe(r)?r:String(r)),n)}var r}function Ye(e,t){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ye(e,t)}function ze(e,t){if(t&&("object"===qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Je(e){return Je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Je(e)}var Ze,Qe,$e,et,tt,it,nt,rt,ot,st,at=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}(s,Phaser.Scene);var t,i,n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Je(n);if(r){var i=Je(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return ze(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),o.call(this,"Start")}return t=s,(i=[{key:"create",value:function(e){this.createBG(e),this.createStartText(),void 0!==e.score&&this.createStats(e)}},{key:"createBG",value:function(e){var t=this;this.sceneBG=this.add.sprite(ct.width/2,ct.height/2,"bg").setAlpha(.925).setOrigin(.5).setInteractive();var i=this.cameras.main.width/this.sceneBG.width,n=this.cameras.main.height/this.sceneBG.height,r=Math.max(i,n);this.sceneBG.setScale(r).setScrollFactor(0),this.sceneBG.on("pointerdown",(function(){t.scene.start("Game",e)}),this)}},{key:"createStats",value:function(e){this.add.graphics().fillStyle("#000",.5).fillRoundedRect(ct.width/2-.15*ct.width,ct.height/2-.25*ct.height,.3*ct.width,.5*ct.height,.03*ct.width);var t=e.completed?"Level completed!":"Game over",i="Score: ".concat(e.score),n={font:"".concat(.03*ct.width,"px DishOut"),fill:"#f0f0f0"};this.add.text(ct.width/2,ct.height/2-.125*ct.height,t,n).setOrigin(.5),this.add.text(ct.width/2,ct.height/2+.125*ct.height,i,n).setOrigin(.5)}},{key:"createStartText",value:function(){this.startText=this.add.text(ct.width/2,lt.bottom-.05*ct.height,"Tap to start",{font:"".concat(.04*ct.width,"px DishOut"),fill:"#f0f0f0"}).setOrigin(.5);var e=this.startText.scale,t=this.add.timeline({at:0,targets:this.startText,scale:e+.18,ease:"Power2",duration:550},{targets:this.startText,scale:e,ease:"Power2",duration:550});t.loop=-1,t.play()}}])&&Xe(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(),ct={type:n.AUTO,width:1280,height:720,input:{activePointers:3},physics:{default:"arcade",arcade:{debug:!1}},backgroundColor:"#F3F3F3",parent:"gameDiv",orientation:n.Scale.LANDSCAPE,scale:{mode:n.Scale.ENVELOP,autoCenter:n.Scale.CENTER_BOTH},scene:[l,Ke,be,_e,at,fe,Re,Ie],currentLevelScene:null!==(Ze=localStorage.getItem("currentLevelScene"))&&void 0!==Ze?Ze:1,currentLevelPlayer:null!==(Qe=localStorage.getItem("currentLevelPlayer"))&&void 0!==Qe?Qe:1,totalScore:null!==($e=localStorage.getItem("totalScore"))&&void 0!==$e?$e:0,money:null!==(et=localStorage.getItem("money"))&&void 0!==et?et:0,joystick:{radius:100,gap:35},level:{scoreCof:1.2,levelCof:1.3,score:500},Losses:{jet:null!==(tt=localStorage.getItem("losses_jet"))&&void 0!==tt?tt:0,helicopter:null!==(it=localStorage.getItem("losses_helicopter"))&&void 0!==it?it:0,rocket:null!==(nt=localStorage.getItem("losses_rocket"))&&void 0!==nt?nt:0,missile:null!==(rt=localStorage.getItem("losses_missile"))&&void 0!==rt?rt:0},Player:{velocity:500},Enemies:{helicopter:{velocity:175,weapon:"rocket",nums:4},jet:{velocity:325,weapon:"missile",nums:4},strategic_jet:{velocity:400,weapon:"missile_2",nums:4}},Weapons:{fire:{reload:500,velocity:750,scale:.5},rocket:{reload:1500,velocity:-415,scale:.35},missile:{reload:1750,velocity:-575,scale:.45},missile_2:{reload:2e3,velocity:-1e3,scale:.5}},weapons_units:{reload:"ms",velocity:"m/s",scale:"%"},upgradeColors:{reload:"66E210",velocity:"FF2407",scale:"0291F7"},reward:{missile_2:750,strategic_jet:500,jet:375,helicopter:275,missile:150,rocket:100},Levels:[{level:1,name:"Kyiv Pechersk",x:485,y:175,enemies:5,enemiesDelay:2500,velocity:250},{level:2,name:"Odesa",x:506,y:490,enemies:8,enemiesDelay:2250,velocity:265},{level:3,name:"Kharkiv",x:758,y:179,enemies:11,enemiesDelay:2e3,velocity:285},{level:4,name:"Kyiv Podil",x:430,y:135,enemies:15,enemiesDelay:1750,velocity:315},{level:5,name:"Mariupol Azovstal",x:890,y:397,enemies:21,enemiesDelay:1600,velocity:325},{level:6,name:"Vinnitsia Tower",x:353,y:287,enemies:28,enemiesDelay:1450,velocity:335},{level:7,name:"Kyiv Voskresenka",x:435,y:195,enemies:39,enemiesDelay:1300,velocity:345},{level:8,name:"Lviv Plocha Runok",x:105,y:248,enemies:50,enemiesDelay:1150,velocity:350},{level:9,name:"Dnipro",x:720,y:311,enemies:65,enemiesDelay:1075,velocity:355},{level:10,name:"Genichesk",x:732,y:509,enemies:82,enemiesDelay:1e3,velocity:360},{level:11,name:"Donetsk",x:874,y:333,enemies:100,enemiesDelay:925,velocity:365},{level:12,name:"Zaporizha",x:735,y:366,enemies:120,enemiesDelay:850,velocity:370},{level:13,name:"Sevastopol Balaklava",x:676,y:640,enemies:145,enemiesDelay:775,velocity:375},{level:14,name:"Lugansk",x:956,y:261,enemies:200,enemiesDelay:700,velocity:380}],unlim:{unlim:!0,level:10,enemies:9999,enemiesDelay:1e3,velocity:380},firstTimePlay:null!==(ot=localStorage.getItem("firstTimePlay"))&&void 0!==ot?ot:"1"},lt=(new n.Game(ct),{});function ut(){document.body.clientWidth/document.body.clientHeight==16/9?(lt.left=0,lt.right=ct.width,lt.top=0,lt.bottom=ct.height):document.body.clientWidth>=document.body.clientHeight?document.body.clientWidth/document.body.clientHeight<16/9?(lt.left=ct.width/2-ct.height/document.body.clientHeight*document.body.clientWidth/2,lt.right=ct.width/2+ct.height/document.body.clientHeight*document.body.clientWidth/2,lt.top=0,lt.bottom=ct.height):(lt.left=0,lt.right=ct.width,lt.top=(ct.height-ct.width/ct.height/(document.body.clientWidth/document.body.clientHeight)*ct.height)/2,lt.bottom=ct.height-(ct.height-ct.width/ct.height/(document.body.clientWidth/document.body.clientHeight)*ct.height)/2):(lt.left=ct.width/2-ct.height/document.body.clientHeight*document.body.clientWidth/2,lt.right=ct.width/2+ct.height/document.body.clientHeight*document.body.clientWidth/2,lt.top=0,lt.bottom=ct.height)}function ht(e){var t=Object.keys(ct.Weapons.fire);if(!e.init)return"reload"===e.key?ct.Weapons.fire[e.key]-=.05*ct.Weapons.fire[e.key]:ct.Weapons.fire[e.key]+=.05*ct.Weapons.fire[e.key],ct.Weapons.fire[e.key];for(var i=0;i<t.length;i++)for(var n=t[i],r=localStorage.getItem("playerWeapon_".concat(n)),o=1;o<r;o++)"reload"===n?ct.Weapons.fire[n]-=.05*ct.Weapons.fire[n]:ct.Weapons.fire[n]+=.05*ct.Weapons.fire[n]}function ft(e){return"0x"+((1<<24)+(e.r<<16)+(e.g<<8)+e.b).toString(16).slice(1)}"0"!==localStorage.getItem("firstTimePlay")&&(st=Array(ct.Levels.length).fill(0),localStorage.setItem("hiScores",st),localStorage.setItem("unlimHiScores",0),Object.keys(ct.Losses).forEach((function(e){localStorage.setItem("losses_".concat(e),0)})),function(){for(var e=Object.keys(ct.Weapons.fire),t=0;t<e.length;t++){var i=e[t];localStorage.setItem("playerWeapon_".concat(i),1)}}(),localStorage.setItem("currentLevelPlayer",ct.currentLevelPlayer),localStorage.setItem("money",ct.money)),ht({init:!0}),window.addEventListener("orientationchange",(function(){document.location.reload()})),window.addEventListener("resize",(function(){document.location.reload()}))}},i={};function n(e){var r=i[e];if(void 0!==r)return r.exports;var o=i[e]={exports:{}};return t[e].call(o.exports,o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,i,r,o)=>{if(!i){var s=1/0;for(u=0;u<e.length;u++){for(var[i,r,o]=e[u],a=!0,c=0;c<i.length;c++)(!1&o||s>=o)&&Object.keys(n.O).every((e=>n.O[e](i[c])))?i.splice(c--,1):(a=!1,o<s&&(s=o));if(a){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[i,r,o]},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,i)=>{var r,o,[s,a,c]=i,l=0;if(s.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(c)var u=c(n)}for(t&&t(i);l<s.length;l++)o=s[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},i=self.webpackChunkinvaiders_must_die=self.webpackChunkinvaiders_must_die||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var r=n.O(void 0,[426],(()=>n(47)));r=n.O(r)})();